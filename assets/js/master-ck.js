!function(e){function t(e,t){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var i="[\\?&]"+e+"=([^&#]*)",n=new RegExp(i),s=n.exec(t);return null==s?"":s[1]}e.prettyPhoto={version:"3.0"},e.fn.prettyPhoto=function(i){function n(t){$pp_pic_holder.find("#pp_full_res object,#pp_full_res embed").css("visibility","hidden"),$pp_pic_holder.find(".pp_fade").fadeOut(settings.animation_speed,function(){e(".pp_loaderIcon").show(),t()})}function s(t){set_position==t-1?($pp_pic_holder.find("a.pp_next").css("visibility","hidden"),$pp_pic_holder.find("a.pp_next").addClass("disabled").unbind("click")):($pp_pic_holder.find("a.pp_next").css("visibility","visible"),$pp_pic_holder.find("a.pp_next.disabled").removeClass("disabled").bind("click",function(){return e.prettyPhoto.changePage("next"),!1})),0==set_position?$pp_pic_holder.find("a.pp_previous").css("visibility","hidden").addClass("disabled").unbind("click"):$pp_pic_holder.find("a.pp_previous.disabled").css("visibility","visible").removeClass("disabled").bind("click",function(){return e.prettyPhoto.changePage("previous"),!1}),t>1?e(".pp_nav").show():e(".pp_nav").hide()}function r(e,t){if(resized=!1,o(e,t),imageWidth=e,imageHeight=t,(y>x||b>w)&&doresize&&settings.allow_resize&&!f){for(resized=!0,fitting=!1;!fitting;)y>x?(imageWidth=x-200,imageHeight=t/e*imageWidth):b>w?(imageHeight=w-200,imageWidth=e/t*imageHeight):fitting=!0,b=imageHeight,y=imageWidth;o(imageWidth,imageHeight)}return{width:Math.floor(imageWidth),height:Math.floor(imageHeight),containerHeight:Math.floor(b),containerWidth:Math.floor(y)+40,contentHeight:Math.floor(_),contentWidth:Math.floor(v),resized:resized}}function o(t,i){t=parseFloat(t),i=parseFloat(i),$pp_details=$pp_pic_holder.find(".pp_details"),$pp_details.width(t),detailsHeight=parseFloat($pp_details.css("marginTop"))+parseFloat($pp_details.css("marginBottom")),$pp_details=$pp_details.clone().appendTo(e("body")).css({position:"absolute",top:-1e4}),detailsHeight+=$pp_details.height(),detailsHeight=34>=detailsHeight?36:detailsHeight,e.browser.msie&&7==e.browser.version&&(detailsHeight+=8),$pp_details.remove(),_=i+detailsHeight,v=t,b=_+$ppt.height()+$pp_pic_holder.find(".pp_top").height()+$pp_pic_holder.find(".pp_bottom").height(),y=t}function a(e){return e.match(/youtube\.com\/watch/i)?"youtube":e.match(/vimeo\.com/i)?"vimeo":-1!=e.indexOf(".mov")?"quicktime":-1!=e.indexOf(".swf")?"flash":-1!=e.indexOf("iframe")?"iframe":-1!=e.indexOf("custom")?"custom":"#"==e.substr(0,1)?"inline":"image"}function l(){doresize&&"undefined"!=typeof $pp_pic_holder&&(scroll_pos=c(),titleHeight=$ppt.height(),contentHeight=$pp_pic_holder.height(),contentwidth=$pp_pic_holder.width(),projectedTop=w/2+scroll_pos.scrollTop-contentHeight/2,$pp_pic_holder.css({top:projectedTop,left:x/2+scroll_pos.scrollLeft-contentwidth/2}))}function c(){return self.pageYOffset?{scrollTop:self.pageYOffset,scrollLeft:self.pageXOffset}:document.documentElement&&document.documentElement.scrollTop?{scrollTop:document.documentElement.scrollTop,scrollLeft:document.documentElement.scrollLeft}:document.body?{scrollTop:document.body.scrollTop,scrollLeft:document.body.scrollLeft}:void 0}function d(){w=e(window).height(),x=e(window).width(),"undefined"!=typeof $pp_overlay&&$pp_overlay.height(e(document).height())}function u(){isSet&&settings.overlay_gallery&&"image"==a(pp_images[set_position])?(itemWidth=57,navWidth="facebook"==settings.theme?58:38,itemsPerPage=Math.floor((m.containerWidth-100-navWidth)/itemWidth),itemsPerPage=itemsPerPage<pp_images.length?itemsPerPage:pp_images.length,totalPage=Math.ceil(pp_images.length/itemsPerPage)-1,0==totalPage?(navWidth=0,$pp_pic_holder.find(".pp_gallery .pp_arrow_next,.pp_gallery .pp_arrow_previous").hide()):$pp_pic_holder.find(".pp_gallery .pp_arrow_next,.pp_gallery .pp_arrow_previous").show(),galleryWidth=itemsPerPage*itemWidth+navWidth,$pp_pic_holder.find(".pp_gallery").width(galleryWidth).css("margin-left",-(galleryWidth/2)),$pp_pic_holder.find(".pp_gallery ul").width(itemsPerPage*itemWidth).find("li.selected").removeClass("selected"),goToPage=Math.floor(set_position/itemsPerPage)<=totalPage?Math.floor(set_position/itemsPerPage):totalPage,itemsPerPage?$pp_pic_holder.find(".pp_gallery").hide().show().removeClass("disabled"):$pp_pic_holder.find(".pp_gallery").hide().addClass("disabled"),e.prettyPhoto.changeGalleryPage(goToPage),$pp_pic_holder.find(".pp_gallery ul li:eq("+set_position+")").addClass("selected")):($pp_pic_holder.find(".pp_content").unbind("mouseenter mouseleave"),$pp_pic_holder.find(".pp_gallery").hide())}function h(t){if(theRel=e(t).attr("rel"),galleryRegExp=/\[(?:.*)\]/,isSet=galleryRegExp.exec(theRel)?!0:!1,pp_images=isSet?jQuery.map(p,function(t,i){return-1!=e(t).attr("rel").indexOf(theRel)?e(t).attr("href"):void 0}):e.makeArray(e(t).attr("href")),pp_titles=isSet?jQuery.map(p,function(t,i){return-1!=e(t).attr("rel").indexOf(theRel)?e(t).find("img").attr("alt")?e(t).find("img").attr("alt"):"":void 0}):e.makeArray(e(t).find("img").attr("alt")),pp_descriptions=isSet?jQuery.map(p,function(t,i){return-1!=e(t).attr("rel").indexOf(theRel)?e(t).attr("title")?e(t).attr("title"):"":void 0}):e.makeArray(e(t).attr("title")),e("body").append(settings.markup),$pp_pic_holder=e(".pp_pic_holder"),$ppt=e(".ppt"),$pp_overlay=e("div.pp_overlay"),isSet&&settings.overlay_gallery){currentGalleryPage=0,toInject="";for(var i=0;i<pp_images.length;i++){var s=new RegExp("(.*?).(jpg|jpeg|png|gif)$"),r=s.exec(pp_images[i]);classname=r?"":"default",toInject+="<li class='"+classname+"'><a href='#'><img src='"+pp_images[i]+"' width='50' alt='' /></a></li>"}toInject=settings.gallery_markup.replace(/{gallery}/g,toInject),$pp_pic_holder.find("#pp_full_res").after(toInject),$pp_pic_holder.find(".pp_gallery .pp_arrow_next").click(function(){return e.prettyPhoto.changeGalleryPage("next"),e.prettyPhoto.stopSlideshow(),!1}),$pp_pic_holder.find(".pp_gallery .pp_arrow_previous").click(function(){return e.prettyPhoto.changeGalleryPage("previous"),e.prettyPhoto.stopSlideshow(),!1}),$pp_pic_holder.find(".pp_content").hover(function(){$pp_pic_holder.find(".pp_gallery:not(.disabled)").fadeIn()},function(){$pp_pic_holder.find(".pp_gallery:not(.disabled)").fadeOut()}),itemWidth=57,$pp_pic_holder.find(".pp_gallery ul li").each(function(t){e(this).css({position:"absolute",left:t*itemWidth}),e(this).find("a").unbind("click").click(function(){return e.prettyPhoto.changePage(t),e.prettyPhoto.stopSlideshow(),!1})})}settings.slideshow&&($pp_pic_holder.find(".pp_nav").prepend('<a href="#" class="pp_play">Play</a>'),$pp_pic_holder.find(".pp_nav .pp_play").click(function(){return e.prettyPhoto.startSlideshow(),!1})),$pp_pic_holder.attr("class","pp_pic_holder "+settings.theme),$pp_overlay.css({opacity:0,height:e(document).height(),width:e(document).width()}).bind("click",function(){settings.modal||e.prettyPhoto.close()}),e("a.pp_close").bind("click",function(){return e.prettyPhoto.close(),!1}),e("a.pp_expand").bind("click",function(t){return e(this).hasClass("pp_expand")?(e(this).removeClass("pp_expand").addClass("pp_contract"),doresize=!1):(e(this).removeClass("pp_contract").addClass("pp_expand"),doresize=!0),n(function(){e.prettyPhoto.open()}),!1}),$pp_pic_holder.find(".pp_previous, .pp_nav .pp_arrow_previous").bind("click",function(){return e.prettyPhoto.changePage("previous"),e.prettyPhoto.stopSlideshow(),!1}),$pp_pic_holder.find(".pp_next, .pp_nav .pp_arrow_next").bind("click",function(){return e.prettyPhoto.changePage("next"),e.prettyPhoto.stopSlideshow(),!1}),l()}i=jQuery.extend({animation_speed:"fast",slideshow:!1,autoplay_slideshow:!1,opacity:.8,show_title:!0,allow_resize:!0,default_width:500,default_height:344,counter_separator_label:"/",theme:"facebook",hideflash:!1,wmode:"opaque",autoplay:!0,modal:!1,overlay_gallery:!0,keyboard_shortcuts:!0,changepicturecallback:function(){},callback:function(){},markup:'<div class="pp_pic_holder"> 						<div class="ppt">&nbsp;</div> 						<div class="pp_top"> 							<div class="pp_left"></div> 							<div class="pp_middle"></div> 							<div class="pp_right"></div> 						</div> 						<div class="pp_content_container"> 							<div class="pp_left"> 							<div class="pp_right"> 								<div class="pp_content"> 									<div class="pp_loaderIcon"></div> 									<div class="pp_fade"> 										<a href="#" class="pp_expand" title="Expand the image">Expand</a> 										<div class="pp_hoverContainer"> 											<a class="pp_next" href="#">next</a> 											<a class="pp_previous" href="#">previous</a> 										</div> 										<div id="pp_full_res"></div> 										<div class="pp_details clearfix"> 											<p class="pp_description"></p> 											<a class="pp_close" href="#">Close</a> 											<div class="pp_nav"> 												<a href="#" class="pp_arrow_previous">Previous</a> 												<p class="currentTextHolder">0/0</p> 												<a href="#" class="pp_arrow_next">Next</a> 											</div> 										</div> 									</div> 								</div> 							</div> 							</div> 						</div> 						<div class="pp_bottom"> 							<div class="pp_left"></div> 							<div class="pp_middle"></div> 							<div class="pp_right"></div> 						</div> 					</div> 					<div class="pp_overlay"></div>',gallery_markup:'<div class="pp_gallery"> 								<a href="#" class="pp_arrow_previous">Previous</a> 								<ul> 									{gallery} 								</ul> 								<a href="#" class="pp_arrow_next">Next</a> 							</div>',image_markup:'<img id="fullResImage" src="" />',flash_markup:'<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="{width}" height="{height}"><param name="wmode" value="{wmode}" /><param name="allowfullscreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="movie" value="{path}" /><embed src="{path}" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" width="{width}" height="{height}" wmode="{wmode}"></embed></object>',quicktime_markup:'<object classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B" codebase="http://www.apple.com/qtactivex/qtplugin.cab" height="{height}" width="{width}"><param name="src" value="{path}"><param name="autoplay" value="{autoplay}"><param name="type" value="video/quicktime"><embed src="{path}" height="{height}" width="{width}" autoplay="{autoplay}" type="video/quicktime" pluginspage="http://www.apple.com/quicktime/download/"></embed></object>',iframe_markup:'<iframe src ="{path}" width="{width}" height="{height}" frameborder="no"></iframe>',inline_markup:'<div class="pp_inline clearfix">{content}</div>',custom_markup:""},i);var p=this,f=!1,m,g,_,v,b,y,w=e(window).height(),x=e(window).width(),k;return doresize=!0,scroll_pos=c(),e(window).unbind("resize").resize(function(){l(),d()}),i.keyboard_shortcuts&&e(document).unbind("keydown").keydown(function(t){if("undefined"!=typeof $pp_pic_holder&&$pp_pic_holder.is(":visible")){switch(t.keyCode){case 37:e.prettyPhoto.changePage("previous");break;case 39:e.prettyPhoto.changePage("next");break;case 27:settings.modal||e.prettyPhoto.close()}return!1}}),e.prettyPhoto.initialize=function(){return settings=i,e.browser.msie&&6==parseInt(e.browser.version)&&(settings.theme="light_square"),h(this),settings.allow_resize&&e(window).scroll(function(){l()}),l(),set_position=jQuery.inArray(e(this).attr("href"),pp_images),e.prettyPhoto.open(),!1},e.prettyPhoto.open=function(){return"undefined"==typeof settings&&(settings=i,e.browser.msie&&6==e.browser.version&&(settings.theme="light_square"),h(this),pp_images=e.makeArray(arguments[0]),pp_titles=e.makeArray(arguments[1]?arguments[1]:""),pp_descriptions=e.makeArray(arguments[2]?arguments[2]:""),isSet=pp_images.length>1?!0:!1,set_position=0),e.browser.msie&&6==e.browser.version&&e("select").css("visibility","hidden"),settings.hideflash&&e("object,embed").css("visibility","hidden"),s(e(pp_images).size()),e(".pp_loaderIcon").show(),$ppt.is(":hidden")&&$ppt.css("opacity",0).show(),$pp_overlay.show().fadeTo(settings.animation_speed,settings.opacity),$pp_pic_holder.find(".currentTextHolder").text(set_position+1+settings.counter_separator_label+e(pp_images).size()),$pp_pic_holder.find(".pp_description").show().html(unescape(pp_descriptions[set_position])),$ppt.html(settings.show_title&&""!=pp_titles[set_position]&&"undefined"!=typeof pp_titles[set_position]?unescape(pp_titles[set_position]):"&nbsp;"),movie_width=parseFloat(t("width",pp_images[set_position]))?t("width",pp_images[set_position]):settings.default_width.toString(),movie_height=parseFloat(t("height",pp_images[set_position]))?t("height",pp_images[set_position]):settings.default_height.toString(),-1!=movie_width.indexOf("%")||-1!=movie_height.indexOf("%")?(movie_height=parseFloat(e(window).height()*parseFloat(movie_height)/100-150),movie_width=parseFloat(e(window).width()*parseFloat(movie_width)/100-150),f=!0):f=!1,$pp_pic_holder.fadeIn(function(){switch(imgPreloader="",a(pp_images[set_position])){case"image":imgPreloader=new Image,nextImage=new Image,isSet&&set_position>e(pp_images).size()&&(nextImage.src=pp_images[set_position+1]),prevImage=new Image,isSet&&pp_images[set_position-1]&&(prevImage.src=pp_images[set_position-1]),$pp_pic_holder.find("#pp_full_res")[0].innerHTML=settings.image_markup,$pp_pic_holder.find("#fullResImage").attr("src",pp_images[set_position]),imgPreloader.onload=function(){m=r(imgPreloader.width,imgPreloader.height),_showContent()},imgPreloader.onerror=function(){alert("Image cannot be loaded. Make sure the path is correct and image exist."),e.prettyPhoto.close()},imgPreloader.src=pp_images[set_position];break;case"youtube":m=r(movie_width,movie_height),movie="http://www.youtube.com/v/"+t("v",pp_images[set_position]),settings.autoplay&&(movie+="&autoplay=1"),toInject=settings.flash_markup.replace(/{width}/g,m.width).replace(/{height}/g,m.height).replace(/{wmode}/g,settings.wmode).replace(/{path}/g,movie);break;case"vimeo":m=r(movie_width,movie_height),movie_id=pp_images[set_position];var i=/http:\/\/(www\.)?vimeo.com\/(\d+)/,n=movie_id.match(i);movie="http://player.vimeo.com/video/"+n[2]+"?title=0&amp;byline=0&amp;portrait=0",settings.autoplay&&(movie+="&autoplay=1;"),vimeo_width=m.width+"/embed/?moog_width="+m.width,toInject=settings.iframe_markup.replace(/{width}/g,vimeo_width).replace(/{height}/g,m.height).replace(/{path}/g,movie);break;case"quicktime":m=r(movie_width,movie_height),m.height+=15,m.contentHeight+=15,m.containerHeight+=15,toInject=settings.quicktime_markup.replace(/{width}/g,m.width).replace(/{height}/g,m.height).replace(/{wmode}/g,settings.wmode).replace(/{path}/g,pp_images[set_position]).replace(/{autoplay}/g,settings.autoplay);break;case"flash":m=r(movie_width,movie_height),flash_vars=pp_images[set_position],flash_vars=flash_vars.substring(pp_images[set_position].indexOf("flashvars")+10,pp_images[set_position].length),filename=pp_images[set_position],filename=filename.substring(0,filename.indexOf("?")),toInject=settings.flash_markup.replace(/{width}/g,m.width).replace(/{height}/g,m.height).replace(/{wmode}/g,settings.wmode).replace(/{path}/g,filename+"?"+flash_vars);break;case"iframe":m=r(movie_width,movie_height),frame_url=pp_images[set_position],frame_url=frame_url.substr(0,frame_url.indexOf("iframe")-1),toInject=settings.iframe_markup.replace(/{width}/g,m.width).replace(/{height}/g,m.height).replace(/{path}/g,frame_url);break;case"custom":m=r(movie_width,movie_height),toInject=settings.custom_markup;break;case"inline":myClone=e(pp_images[set_position]).clone().css({width:settings.default_width}).wrapInner('<div id="pp_full_res"><div class="pp_inline clearfix"></div></div>').appendTo(e("body")),m=r(e(myClone).width(),e(myClone).height()),e(myClone).remove(),toInject=settings.inline_markup.replace(/{content}/g,e(pp_images[set_position]).html())}imgPreloader||($pp_pic_holder.find("#pp_full_res")[0].innerHTML=toInject,_showContent())}),!1},e.prettyPhoto.changePage=function(t){if(currentGalleryPage=0,"previous"==t){if(set_position--,0>set_position)return void(set_position=0)}else"next"==t?(set_position++,set_position>e(pp_images).size()-1&&(set_position=0)):set_position=t;doresize||(doresize=!0),e(".pp_contract").removeClass("pp_contract").addClass("pp_expand"),n(function(){e.prettyPhoto.open()})},e.prettyPhoto.changeGalleryPage=function(t){"next"==t?(currentGalleryPage++,currentGalleryPage>totalPage&&(currentGalleryPage=0)):"previous"==t?(currentGalleryPage--,0>currentGalleryPage&&(currentGalleryPage=totalPage)):currentGalleryPage=t,itemsToSlide=currentGalleryPage==totalPage?pp_images.length-totalPage*itemsPerPage:itemsPerPage,$pp_pic_holder.find(".pp_gallery li").each(function(t){e(this).animate({left:t*itemWidth-itemsToSlide*itemWidth*currentGalleryPage})})},e.prettyPhoto.startSlideshow=function(){"undefined"==typeof k?($pp_pic_holder.find(".pp_play").unbind("click").removeClass("pp_play").addClass("pp_pause").click(function(){return e.prettyPhoto.stopSlideshow(),!1}),k=setInterval(e.prettyPhoto.startSlideshow,settings.slideshow)):e.prettyPhoto.changePage("next")},e.prettyPhoto.stopSlideshow=function(){$pp_pic_holder.find(".pp_pause").unbind("click").removeClass("pp_pause").addClass("pp_play").click(function(){return e.prettyPhoto.startSlideshow(),!1}),clearInterval(k),k=void 0},e.prettyPhoto.close=function(){clearInterval(k),$pp_pic_holder.stop().find("object,embed").css("visibility","hidden"),e("div.pp_pic_holder,div.ppt,.pp_fade").fadeOut(settings.animation_speed,function(){e(this).remove()}),$pp_overlay.fadeOut(settings.animation_speed,function(){e.browser.msie&&6==e.browser.version&&e("select").css("visibility","visible"),settings.hideflash&&e("object,embed").css("visibility","visible"),e(this).remove(),e(window).unbind("scroll"),settings.callback(),doresize=!0,g=!1,delete settings})},_showContent=function(){e(".pp_loaderIcon").hide(),$ppt.fadeTo(settings.animation_speed,1),projectedTop=scroll_pos.scrollTop+(w/2-m.containerHeight/2),0>projectedTop&&(projectedTop=0),$pp_pic_holder.find(".pp_content").animate({height:m.contentHeight},settings.animation_speed),$pp_pic_holder.animate({top:projectedTop,left:x/2-m.containerWidth/2,width:m.containerWidth},settings.animation_speed,function(){$pp_pic_holder.find(".pp_hoverContainer,#fullResImage").height(m.height).width(m.width),$pp_pic_holder.find(".pp_fade").fadeIn(settings.animation_speed),isSet&&"image"==a(pp_images[set_position])?$pp_pic_holder.find(".pp_hoverContainer").show():$pp_pic_holder.find(".pp_hoverContainer").hide(),m.resized&&e("a.pp_expand,a.pp_contract").fadeIn(settings.animation_speed),settings.autoplay_slideshow&&!k&&!g&&e.prettyPhoto.startSlideshow(),settings.changepicturecallback(),g=!0}),u()},this.unbind("click").click(e.prettyPhoto.initialize)}}(jQuery),!function(){var e,t,i,n,s,r={}.hasOwnProperty,o=function(e,t){function i(){this.constructor=e}for(var n in t)r.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};n=function(){function e(){this.options_index=0,this.parsed=[]}return e.prototype.add_node=function(e){return"OPTGROUP"===e.nodeName.toUpperCase()?this.add_group(e):this.add_option(e)},e.prototype.add_group=function(e){var t,i,n,s,r,o;for(t=this.parsed.length,this.parsed.push({array_index:t,group:!0,label:this.escapeExpression(e.label),children:0,disabled:e.disabled}),r=e.childNodes,o=[],n=0,s=r.length;s>n;n++)i=r[n],o.push(this.add_option(i,t,e.disabled));return o},e.prototype.add_option=function(e,t,i){return"OPTION"===e.nodeName.toUpperCase()?(""!==e.text?(null!=t&&(this.parsed[t].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:e.value,text:e.text,html:e.innerHTML,selected:e.selected,disabled:i===!0?i:e.disabled,group_array_index:t,classes:e.className,style:e.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1):void 0},e.prototype.escapeExpression=function(e){var t,i;return null==e||e===!1?"":/[\&\<\>\"\'\`]/.test(e)?(t={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},i=/&(?!\w+;)|[\<\>\"\'\`]/g,e.replace(i,function(e){return t[e]||"&amp;"})):e},e}(),n.select_to_array=function(e){var t,i,s,r,o;for(i=new n,o=e.childNodes,s=0,r=o.length;r>s;s++)t=o[s],i.add_node(t);return i.parsed},t=function(){function e(t,i){this.form_field=t,this.options=null!=i?i:{},e.browser_is_supported()&&(this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers())}return e.prototype.set_default_values=function(){var e=this;return this.click_test_action=function(t){return e.test_active_click(t)},this.activate_action=function(t){return e.activate_field(t)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text?this.options.allow_single_deselect:!1,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.enable_split_word_search=null!=this.options.enable_split_word_search?this.options.enable_split_word_search:!0,this.group_search=null!=this.options.group_search?this.options.group_search:!0,this.search_contains=this.options.search_contains||!1,this.single_backstroke_delete=null!=this.options.single_backstroke_delete?this.options.single_backstroke_delete:!0,this.max_selected_options=this.options.max_selected_options||1/0,this.inherit_select_classes=this.options.inherit_select_classes||!1,this.display_selected_options=null!=this.options.display_selected_options?this.options.display_selected_options:!0,this.display_disabled_options=null!=this.options.display_disabled_options?this.options.display_disabled_options:!0},e.prototype.set_default_text=function(){return this.default_text=this.form_field.getAttribute("data-placeholder")?this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.options.placeholder_text_multiple||this.options.placeholder_text||e.default_multiple_text:this.options.placeholder_text_single||this.options.placeholder_text||e.default_single_text,this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||e.default_no_result_text},e.prototype.mouse_enter=function(){return this.mouse_on_container=!0},e.prototype.mouse_leave=function(){return this.mouse_on_container=!1},e.prototype.input_focus=function(){var e=this;if(this.is_multiple){if(!this.active_field)return setTimeout(function(){return e.container_mousedown()},50)}else if(!this.active_field)return this.activate_field()},e.prototype.input_blur=function(){var e=this;return this.mouse_on_container?void 0:(this.active_field=!1,setTimeout(function(){return e.blur_test()},100))},e.prototype.results_option_build=function(e){var t,i,n,s,r;for(t="",r=this.results_data,n=0,s=r.length;s>n;n++)i=r[n],t+=i.group?this.result_add_group(i):this.result_add_option(i),(null!=e?e.first:void 0)&&(i.selected&&this.is_multiple?this.choice_build(i):i.selected&&!this.is_multiple&&this.single_set_selected_text(i.text));return t},e.prototype.result_add_option=function(e){var t,i;return e.search_match&&this.include_option_in_results(e)?(t=[],e.disabled||e.selected&&this.is_multiple||t.push("active-result"),!e.disabled||e.selected&&this.is_multiple||t.push("disabled-result"),e.selected&&t.push("result-selected"),null!=e.group_array_index&&t.push("group-option"),""!==e.classes&&t.push(e.classes),i=document.createElement("li"),i.className=t.join(" "),i.style.cssText=e.style,i.setAttribute("data-option-array-index",e.array_index),i.innerHTML=e.search_text,this.outerHTML(i)):""},e.prototype.result_add_group=function(e){var t;return(e.search_match||e.group_match)&&e.active_options>0?(t=document.createElement("li"),t.className="group-result",t.innerHTML=e.search_text,this.outerHTML(t)):""},e.prototype.results_update_field=function(){return this.set_default_text(),this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.results_build(),this.results_showing?this.winnow_results():void 0},e.prototype.reset_single_select_options=function(){var e,t,i,n,s;for(n=this.results_data,s=[],t=0,i=n.length;i>t;t++)e=n[t],s.push(e.selected?e.selected=!1:void 0);return s},e.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},e.prototype.results_search=function(){return this.results_showing?this.winnow_results():this.results_show()},e.prototype.winnow_results=function(){var e,t,i,n,s,r,o,a,l,c,d,u,h;for(this.no_results_clear(),s=0,o=this.get_search_text(),e=o.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),n=this.search_contains?"":"^",i=new RegExp(n+e,"i"),c=new RegExp(e,"i"),h=this.results_data,d=0,u=h.length;u>d;d++)t=h[d],t.search_match=!1,r=null,this.include_option_in_results(t)&&(t.group&&(t.group_match=!1,t.active_options=0),null!=t.group_array_index&&this.results_data[t.group_array_index]&&(r=this.results_data[t.group_array_index],0===r.active_options&&r.search_match&&(s+=1),r.active_options+=1),(!t.group||this.group_search)&&(t.search_text=t.group?t.label:t.html,t.search_match=this.search_string_match(t.search_text,i),t.search_match&&!t.group&&(s+=1),t.search_match?(o.length&&(a=t.search_text.search(c),l=t.search_text.substr(0,a+o.length)+"</em>"+t.search_text.substr(a+o.length),t.search_text=l.substr(0,a)+"<em>"+l.substr(a)),null!=r&&(r.group_match=!0)):null!=t.group_array_index&&this.results_data[t.group_array_index].search_match&&(t.search_match=!0)));return this.result_clear_highlight(),1>s&&o.length?(this.update_results_content(""),this.no_results(o)):(this.update_results_content(this.results_option_build()),this.winnow_results_set_highlight())},e.prototype.search_string_match=function(e,t){var i,n,s,r;if(t.test(e))return!0;if(this.enable_split_word_search&&(e.indexOf(" ")>=0||0===e.indexOf("["))&&(n=e.replace(/\[|\]/g,"").split(" "),n.length))for(s=0,r=n.length;r>s;s++)if(i=n[s],t.test(i))return!0},e.prototype.choices_count=function(){var e,t,i,n;if(null!=this.selected_option_count)return this.selected_option_count;for(this.selected_option_count=0,n=this.form_field.options,t=0,i=n.length;i>t;t++)e=n[t],e.selected&&(this.selected_option_count+=1);return this.selected_option_count},e.prototype.choices_click=function(e){return e.preventDefault(),this.results_showing||this.is_disabled?void 0:this.results_show()},e.prototype.keyup_checker=function(e){var t,i;switch(t=null!=(i=e.which)?i:e.keyCode,this.search_field_scale(),t){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices_count()>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:if(e.preventDefault(),this.results_showing)return this.result_select(e);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},e.prototype.clipboard_event_checker=function(){var e=this;return setTimeout(function(){return e.results_search()},50)},e.prototype.container_width=function(){return null!=this.options.width?this.options.width:""+this.form_field.offsetWidth+"px"},e.prototype.include_option_in_results=function(e){return this.is_multiple&&!this.display_selected_options&&e.selected?!1:!this.display_disabled_options&&e.disabled?!1:e.empty?!1:!0},e.prototype.search_results_touchstart=function(e){return this.touch_started=!0,this.search_results_mouseover(e)},e.prototype.search_results_touchmove=function(e){return this.touch_started=!1,this.search_results_mouseout(e)},e.prototype.search_results_touchend=function(e){return this.touch_started?this.search_results_mouseup(e):void 0},e.prototype.outerHTML=function(e){var t;return e.outerHTML?e.outerHTML:(t=document.createElement("div"),t.appendChild(e),t.innerHTML)},e.browser_is_supported=function(){return"Microsoft Internet Explorer"===window.navigator.appName?document.documentMode>=8:/iP(od|hone)/i.test(window.navigator.userAgent)?!1:/Android/i.test(window.navigator.userAgent)&&/Mobile/i.test(window.navigator.userAgent)?!1:!0},e.default_multiple_text="Select Some Options",e.default_single_text="Select an Option",e.default_no_result_text="No results match",e}(),e=jQuery,e.fn.extend({chosen:function(n){return t.browser_is_supported()?this.each(function(){var t,s;t=e(this),s=t.data("chosen"),"destroy"===n&&s?s.destroy():s||t.data("chosen",new i(this,n))}):this}}),i=function(t){function i(){return s=i.__super__.constructor.apply(this,arguments)}return o(i,t),i.prototype.setup=function(){return this.form_field_jq=e(this.form_field),this.current_selectedIndex=this.form_field.selectedIndex,this.is_rtl=this.form_field_jq.hasClass("chosen-rtl")},i.prototype.set_up_html=function(){var t,i;return t=["chosen-container"],t.push("chosen-container-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&t.push(this.form_field.className),this.is_rtl&&t.push("chosen-rtl"),i={"class":t.join(" "),style:"width: "+this.container_width()+";",title:this.form_field.title},this.form_field.id.length&&(i.id=this.form_field.id.replace(/[^\w]/g,"_")+"_chosen"),this.container=e("<div />",i),this.container.html(this.is_multiple?'<ul class="chosen-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chosen-drop"><ul class="chosen-results"></ul></div>':'<a class="chosen-single chosen-default" tabindex="-1"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chosen-drop"><div class="chosen-search"><input type="text" autocomplete="off" /></div><ul class="chosen-results"></ul></div>'),this.form_field_jq.hide().after(this.container),this.dropdown=this.container.find("div.chosen-drop").first(),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chosen-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chosen-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chosen-search").first(),this.selected_item=this.container.find(".chosen-single").first()),this.results_build(),this.set_tab_index(),this.set_label_behavior(),this.form_field_jq.trigger("chosen:ready",{chosen:this})},i.prototype.register_observers=function(){var e=this;return this.container.bind("mousedown.chosen",function(t){e.container_mousedown(t)}),this.container.bind("mouseup.chosen",function(t){e.container_mouseup(t)}),this.container.bind("mouseenter.chosen",function(t){e.mouse_enter(t)}),this.container.bind("mouseleave.chosen",function(t){e.mouse_leave(t)}),this.search_results.bind("mouseup.chosen",function(t){e.search_results_mouseup(t)}),this.search_results.bind("mouseover.chosen",function(t){e.search_results_mouseover(t)}),this.search_results.bind("mouseout.chosen",function(t){e.search_results_mouseout(t)}),this.search_results.bind("mousewheel.chosen DOMMouseScroll.chosen",function(t){e.search_results_mousewheel(t)}),this.search_results.bind("touchstart.chosen",function(t){e.search_results_touchstart(t)}),this.search_results.bind("touchmove.chosen",function(t){e.search_results_touchmove(t)}),this.search_results.bind("touchend.chosen",function(t){e.search_results_touchend(t)}),this.form_field_jq.bind("chosen:updated.chosen",function(t){e.results_update_field(t)}),this.form_field_jq.bind("chosen:activate.chosen",function(t){e.activate_field(t)}),this.form_field_jq.bind("chosen:open.chosen",function(t){e.container_mousedown(t)}),this.form_field_jq.bind("chosen:close.chosen",function(t){e.input_blur(t)}),this.search_field.bind("blur.chosen",function(t){e.input_blur(t)}),this.search_field.bind("keyup.chosen",function(t){e.keyup_checker(t)
}),this.search_field.bind("keydown.chosen",function(t){e.keydown_checker(t)}),this.search_field.bind("focus.chosen",function(t){e.input_focus(t)}),this.search_field.bind("cut.chosen",function(t){e.clipboard_event_checker(t)}),this.search_field.bind("paste.chosen",function(t){e.clipboard_event_checker(t)}),this.is_multiple?this.search_choices.bind("click.chosen",function(t){e.choices_click(t)}):this.container.bind("click.chosen",function(e){e.preventDefault()})},i.prototype.destroy=function(){return e(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.search_field[0].tabIndex&&(this.form_field_jq[0].tabIndex=this.search_field[0].tabIndex),this.container.remove(),this.form_field_jq.removeData("chosen"),this.form_field_jq.show()},i.prototype.search_field_disabled=function(){return this.is_disabled=this.form_field_jq[0].disabled,this.is_disabled?(this.container.addClass("chosen-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus.chosen",this.activate_action),this.close_field()):(this.container.removeClass("chosen-disabled"),this.search_field[0].disabled=!1,this.is_multiple?void 0:this.selected_item.bind("focus.chosen",this.activate_action))},i.prototype.container_mousedown=function(t){return this.is_disabled||(t&&"mousedown"===t.type&&!this.results_showing&&t.preventDefault(),null!=t&&e(t.target).hasClass("search-choice-close"))?void 0:(this.active_field?this.is_multiple||!t||e(t.target)[0]!==this.selected_item[0]&&!e(t.target).parents("a.chosen-single").length||(t.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),e(this.container[0].ownerDocument).bind("click.chosen",this.click_test_action),this.results_show()),this.activate_field())},i.prototype.container_mouseup=function(e){return"ABBR"!==e.target.nodeName||this.is_disabled?void 0:this.results_reset(e)},i.prototype.search_results_mousewheel=function(e){var t;return e.originalEvent&&(t=-e.originalEvent.wheelDelta||e.originalEvent.detail),null!=t?(e.preventDefault(),"DOMMouseScroll"===e.type&&(t=40*t),this.search_results.scrollTop(t+this.search_results.scrollTop())):void 0},i.prototype.blur_test=function(){return!this.active_field&&this.container.hasClass("chosen-container-active")?this.close_field():void 0},i.prototype.close_field=function(){return e(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClass("chosen-container-active"),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},i.prototype.activate_field=function(){return this.container.addClass("chosen-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},i.prototype.test_active_click=function(t){var i;return i=e(t.target).closest(".chosen-container"),i.length&&this.container[0]===i[0]?this.active_field=!0:this.close_field()},i.prototype.results_build=function(){return this.parsing=!0,this.selected_option_count=null,this.results_data=n.select_to_array(this.form_field),this.is_multiple?this.search_choices.find("li.search-choice").remove():this.is_multiple||(this.single_set_selected_text(),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?(this.search_field[0].readOnly=!0,this.container.addClass("chosen-container-single-nosearch")):(this.search_field[0].readOnly=!1,this.container.removeClass("chosen-container-single-nosearch"))),this.update_results_content(this.results_option_build({first:!0})),this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.parsing=!1},i.prototype.result_do_highlight=function(e){var t,i,n,s,r;if(e.length){if(this.result_clear_highlight(),this.result_highlight=e,this.result_highlight.addClass("highlighted"),n=parseInt(this.search_results.css("maxHeight"),10),r=this.search_results.scrollTop(),s=n+r,i=this.result_highlight.position().top+this.search_results.scrollTop(),t=i+this.result_highlight.outerHeight(),t>=s)return this.search_results.scrollTop(t-n>0?t-n:0);if(r>i)return this.search_results.scrollTop(i)}},i.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},i.prototype.results_show=function(){return this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.container.addClass("chosen-with-drop"),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results(),this.form_field_jq.trigger("chosen:showing_dropdown",{chosen:this}))},i.prototype.update_results_content=function(e){return this.search_results.html(e)},i.prototype.results_hide=function(){return this.results_showing&&(this.result_clear_highlight(),this.container.removeClass("chosen-with-drop"),this.form_field_jq.trigger("chosen:hiding_dropdown",{chosen:this})),this.results_showing=!1},i.prototype.set_tab_index=function(){var e;return this.form_field.tabIndex?(e=this.form_field.tabIndex,this.form_field.tabIndex=-1,this.search_field[0].tabIndex=e):void 0},i.prototype.set_label_behavior=function(){var t=this;return this.form_field_label=this.form_field_jq.parents("label"),!this.form_field_label.length&&this.form_field.id.length&&(this.form_field_label=e("label[for='"+this.form_field.id+"']")),this.form_field_label.length>0?this.form_field_label.bind("click.chosen",function(e){return t.is_multiple?t.container_mousedown(e):t.activate_field()}):void 0},i.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices_count()<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},i.prototype.search_results_mouseup=function(t){var i;return i=e(t.target).hasClass("active-result")?e(t.target):e(t.target).parents(".active-result").first(),i.length?(this.result_highlight=i,this.result_select(t),this.search_field.focus()):void 0},i.prototype.search_results_mouseover=function(t){var i;return i=e(t.target).hasClass("active-result")?e(t.target):e(t.target).parents(".active-result").first(),i?this.result_do_highlight(i):void 0},i.prototype.search_results_mouseout=function(t){return e(t.target).hasClass("active-result")?this.result_clear_highlight():void 0},i.prototype.choice_build=function(t){var i,n,s=this;return i=e("<li />",{"class":"search-choice"}).html("<span>"+t.html+"</span>"),t.disabled?i.addClass("search-choice-disabled"):(n=e("<a />",{"class":"search-choice-close","data-option-array-index":t.array_index}),n.bind("click.chosen",function(e){return s.choice_destroy_link_click(e)}),i.append(n)),this.search_container.before(i)},i.prototype.choice_destroy_link_click=function(t){return t.preventDefault(),t.stopPropagation(),this.is_disabled?void 0:this.choice_destroy(e(t.target))},i.prototype.choice_destroy=function(e){return this.result_deselect(e[0].getAttribute("data-option-array-index"))?(this.show_search_field_default(),this.is_multiple&&this.choices_count()>0&&this.search_field.val().length<1&&this.results_hide(),e.parents("li").first().remove(),this.search_field_scale()):void 0},i.prototype.results_reset=function(){return this.reset_single_select_options(),this.form_field.options[0].selected=!0,this.single_set_selected_text(),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change"),this.active_field?this.results_hide():void 0},i.prototype.results_reset_cleanup=function(){return this.current_selectedIndex=this.form_field.selectedIndex,this.selected_item.find("abbr").remove()},i.prototype.result_select=function(e){var t,i;return this.result_highlight?(t=this.result_highlight,this.result_clear_highlight(),this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.is_multiple?t.removeClass("active-result"):this.reset_single_select_options(),i=this.results_data[t[0].getAttribute("data-option-array-index")],i.selected=!0,this.form_field.options[i.options_index].selected=!0,this.selected_option_count=null,this.is_multiple?this.choice_build(i):this.single_set_selected_text(i.text),(e.metaKey||e.ctrlKey)&&this.is_multiple||this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[i.options_index].value}),this.current_selectedIndex=this.form_field.selectedIndex,this.search_field_scale())):void 0},i.prototype.single_set_selected_text=function(e){return null==e&&(e=this.default_text),e===this.default_text?this.selected_item.addClass("chosen-default"):(this.single_deselect_control_build(),this.selected_item.removeClass("chosen-default")),this.selected_item.find("span").text(e)},i.prototype.result_deselect=function(e){var t;return t=this.results_data[e],this.form_field.options[t.options_index].disabled?!1:(t.selected=!1,this.form_field.options[t.options_index].selected=!1,this.selected_option_count=null,this.result_clear_highlight(),this.results_showing&&this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[t.options_index].value}),this.search_field_scale(),!0)},i.prototype.single_deselect_control_build=function(){return this.allow_single_deselect?(this.selected_item.find("abbr").length||this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>'),this.selected_item.addClass("chosen-single-with-deselect")):void 0},i.prototype.get_search_text=function(){return this.search_field.val()===this.default_text?"":e("<div/>").text(e.trim(this.search_field.val())).html()},i.prototype.winnow_results_set_highlight=function(){var e,t;return t=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),e=t.length?t.first():this.search_results.find(".active-result").first(),null!=e?this.result_do_highlight(e):void 0},i.prototype.no_results=function(t){var i;return i=e('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>'),i.find("span").first().html(t),this.search_results.append(i),this.form_field_jq.trigger("chosen:no_results",{chosen:this})},i.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},i.prototype.keydown_arrow=function(){var e;return this.results_showing&&this.result_highlight?(e=this.result_highlight.nextAll("li.active-result").first())?this.result_do_highlight(e):void 0:this.results_show()},i.prototype.keyup_arrow=function(){var e;return this.results_showing||this.is_multiple?this.result_highlight?(e=this.result_highlight.prevAll("li.active-result"),e.length?this.result_do_highlight(e.first()):(this.choices_count()>0&&this.results_hide(),this.result_clear_highlight())):void 0:this.results_show()},i.prototype.keydown_backstroke=function(){var e;return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(e=this.search_container.siblings("li.search-choice").last(),e.length&&!e.hasClass("search-choice-disabled")?(this.pending_backstroke=e,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")):void 0)},i.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},i.prototype.keydown_checker=function(e){var t,i;switch(t=null!=(i=e.which)?i:e.keyCode,this.search_field_scale(),8!==t&&this.pending_backstroke&&this.clear_backstroke(),t){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(e),this.mouse_on_container=!1;break;case 13:e.preventDefault();break;case 38:e.preventDefault(),this.keyup_arrow();break;case 40:e.preventDefault(),this.keydown_arrow()}},i.prototype.search_field_scale=function(){var t,i,n,s,r,o,a,l,c;if(this.is_multiple){for(n=0,a=0,r="position:absolute; left: -1000px; top: -1000px; display:none;",o=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"],l=0,c=o.length;c>l;l++)s=o[l],r+=s+":"+this.search_field.css(s)+";";return t=e("<div />",{style:r}),t.text(this.search_field.val()),e("body").append(t),a=t.width()+25,t.remove(),i=this.container.outerWidth(),a>i-10&&(a=i-10),this.search_field.css({width:a+"px"})}},i}(t)}.call(this),function(e){e.extend(e.fn,{validate:function(t){if(this.length){var i=e.data(this[0],"validator");return i?i:(i=new e.validator(t,this[0]),e.data(this[0],"validator",i),i.settings.onsubmit&&(this.find("input, button").filter(".cancel").click(function(){i.cancelSubmit=!0}),i.settings.submitHandler&&this.find("input, button").filter(":submit").click(function(){i.submitButton=this}),this.submit(function(t){function n(){if(i.settings.submitHandler){if(i.submitButton)var t=e("<input type='hidden'/>").attr("name",i.submitButton.name).val(i.submitButton.value).appendTo(i.currentForm);return i.settings.submitHandler.call(i,i.currentForm),i.submitButton&&t.remove(),!1}return!0}return i.settings.debug&&t.preventDefault(),i.cancelSubmit?(i.cancelSubmit=!1,n()):i.form()?i.pendingRequest?(i.formSubmitted=!0,!1):n():(i.focusInvalid(),!1)})),i)}t&&t.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing")},valid:function(){if(e(this[0]).is("form"))return this.validate().form();var t=!0,i=e(this[0].form).validate();return this.each(function(){t&=i.element(this)}),t},removeAttrs:function(t){var i={},n=this;return e.each(t.split(/\s/),function(e,t){i[t]=n.attr(t),n.removeAttr(t)}),i},rules:function(t,i){var n=this[0];if(t){var s=e.data(n.form,"validator").settings,r=s.rules,o=e.validator.staticRules(n);switch(t){case"add":e.extend(o,e.validator.normalizeRule(i)),r[n.name]=o,i.messages&&(s.messages[n.name]=e.extend(s.messages[n.name],i.messages));break;case"remove":if(!i)return delete r[n.name],o;var a={};return e.each(i.split(/\s/),function(e,t){a[t]=o[t],delete o[t]}),a}}return n=e.validator.normalizeRules(e.extend({},e.validator.metadataRules(n),e.validator.classRules(n),e.validator.attributeRules(n),e.validator.staticRules(n)),n),n.required&&(s=n.required,delete n.required,n=e.extend({required:s},n)),n}}),e.extend(e.expr[":"],{blank:function(t){return!e.trim(""+t.value)},filled:function(t){return!!e.trim(""+t.value)},unchecked:function(e){return!e.checked}}),e.validator=function(t,i){this.settings=e.extend(!0,{},e.validator.defaults,t),this.currentForm=i,this.init()},e.validator.format=function(t,i){return 1==arguments.length?function(){var i=e.makeArray(arguments);return i.unshift(t),e.validator.format.apply(this,i)}:(arguments.length>2&&i.constructor!=Array&&(i=e.makeArray(arguments).slice(1)),i.constructor!=Array&&(i=[i]),e.each(i,function(e,i){t=t.replace(RegExp("\\{"+e+"\\}","g"),i)}),t)},e.extend(e.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:!0,errorContainer:e([]),errorLabelContainer:e([]),onsubmit:!0,ignore:[],ignoreTitle:!1,onfocusin:function(e){this.lastActive=e,this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,e,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(e)).hide())},onfocusout:function(e){!this.checkable(e)&&(e.name in this.submitted||!this.optional(e))&&this.element(e)},onkeyup:function(e){(e.name in this.submitted||e==this.lastElement)&&this.element(e)},onclick:function(e){e.name in this.submitted?this.element(e):e.parentNode.name in this.submitted&&this.element(e.parentNode)},highlight:function(t,i,n){"radio"===t.type?this.findByName(t.name).addClass(i).removeClass(n):e(t).addClass(i).removeClass(n)},unhighlight:function(t,i,n){"radio"===t.type?this.findByName(t.name).removeClass(i).addClass(n):e(t).removeClass(i).addClass(n)}},setDefaults:function(t){e.extend(e.validator.defaults,t)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",accept:"Please enter a value with a valid extension.",maxlength:e.validator.format("Please enter no more than {0} characters."),minlength:e.validator.format("Please enter at least {0} characters."),rangelength:e.validator.format("Please enter a value between {0} and {1} characters long."),range:e.validator.format("Please enter a value between {0} and {1}."),max:e.validator.format("Please enter a value less than or equal to {0}."),min:e.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function t(t){var i=e.data(this[0].form,"validator");t="on"+t.type.replace(/^validate/,""),i.settings[t]&&i.settings[t].call(i,this[0])}this.labelContainer=e(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||e(this.currentForm),this.containers=e(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var i=this.groups={};e.each(this.settings.groups,function(t,n){e.each(n.split(/\s/),function(e,n){i[n]=t})});var n=this.settings.rules;e.each(n,function(t,i){n[t]=e.validator.normalizeRule(i)}),e(this.currentForm).validateDelegate(":text, :password, :file, select, textarea","focusin focusout keyup",t).validateDelegate(":radio, :checkbox, select, option","click",t),this.settings.invalidHandler&&e(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),e.extend(this.submitted,this.errorMap),this.invalid=e.extend({},this.errorMap),this.valid()||e(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var e=0,t=this.currentElements=this.elements();t[e];e++)this.check(t[e]);return this.valid()},element:function(t){this.lastElement=t=this.clean(t),this.prepareElement(t),this.currentElements=e(t);var i=this.check(t);return i?delete this.invalid[t.name]:this.invalid[t.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),i},showErrors:function(t){if(t){e.extend(this.errorMap,t),this.errorList=[];for(var i in t)this.errorList.push({message:t[i],element:this.findByName(i)[0]});this.successList=e.grep(this.successList,function(e){return!(e.name in t)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){e.fn.resetForm&&e(this.currentForm).resetForm(),this.submitted={},this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(e){var t=0,i;for(i in e)t++;return t},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return 0==this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{e(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(t){}},findLastActive:function(){var t=this.lastActive;return t&&1==e.grep(this.errorList,function(e){return e.element.name==t.name}).length&&t},elements:function(){var t=this,i={};return e(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){return!this.name&&t.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.name in i||!t.objectLength(e(this).rules())?!1:i[this.name]=!0})},clean:function(t){return e(t)[0]},errors:function(){return e(this.settings.errorElement+"."+this.settings.errorClass,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=e([]),this.toHide=e([]),this.currentElements=e([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(e){this.reset(),this.toHide=this.errorsFor(e)},check:function(t){t=this.clean(t),this.checkable(t)&&(t=this.findByName(t.name).not(this.settings.ignore)[0]);var i=e(t).rules(),n=!1,s;for(s in i){var r={method:s,parameters:i[s]};try{var o=e.validator.methods[s].call(this,t.value.replace(/\r/g,""),t,r.parameters);if("dependency-mismatch"==o)n=!0;else{if(n=!1,"pending"==o)return void(this.toHide=this.toHide.not(this.errorsFor(t)));if(!o)return this.formatAndAdd(t,r),!1}}catch(a){throw this.settings.debug&&window.console&&console.log("exception occured when checking element "+t.id+", check the '"+r.method+"' method",a),a}}return n?void 0:(this.objectLength(i)&&this.successList.push(t),!0)},customMetaMessage:function(t,i){if(e.metadata){var n=this.settings.meta?e(t).metadata()[this.settings.meta]:e(t).metadata();return n&&n.messages&&n.messages[i]}},customMessage:function(e,t){var i=this.settings.messages[e];return i&&(i.constructor==String?i:i[t])},findDefined:function(){for(var e=0;e<arguments.length;e++)if(void 0!==arguments[e])return arguments[e]},defaultMessage:function(t,i){return this.findDefined(this.customMessage(t.name,i),this.customMetaMessage(t,i),!this.settings.ignoreTitle&&t.title||void 0,e.validator.messages[i],"<strong>Warning: No message defined for "+t.name+"</strong>")},formatAndAdd:function(e,t){var i=this.defaultMessage(e,t.method),n=/\$?\{(\d+)\}/g;"function"==typeof i?i=i.call(this,t.parameters,e):n.test(i)&&(i=jQuery.format(i.replace(n,"{$1}"),t.parameters)),this.errorList.push({message:i,element:e}),this.errorMap[e.name]=i,this.submitted[e.name]=i},addWrapper:function(e){return this.settings.wrapper&&(e=e.add(e.parent(this.settings.wrapper))),e},defaultShowErrors:function(){for(var e=0;this.errorList[e];e++){var t=this.errorList[e];this.settings.highlight&&this.settings.highlight.call(this,t.element,this.settings.errorClass,this.settings.validClass),this.showLabel(t.element,t.message)}if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(e=0;this.successList[e];e++)this.showLabel(this.successList[e]);if(this.settings.unhighlight)for(e=0,t=this.validElements();t[e];e++)this.settings.unhighlight.call(this,t[e],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return e(this.errorList).map(function(){return this.element})},showLabel:function(t,i){var n=this.errorsFor(t);n.length?(n.removeClass().addClass(this.settings.errorClass),n.attr("generated")&&n.html(i)):(n=e("<"+this.settings.errorElement+"/>").attr({"for":this.idOrName(t),generated:!0}).addClass(this.settings.errorClass).html(i||""),this.settings.wrapper&&(n=n.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(n).length||(this.settings.errorPlacement?this.settings.errorPlacement(n,e(t)):n.insertAfter(t))),!i&&this.settings.success&&(n.text(""),"string"==typeof this.settings.success?n.addClass(this.settings.success):this.settings.success(n)),this.toShow=this.toShow.add(n)},errorsFor:function(t){var i=this.idOrName(t);return this.errors().filter(function(){return e(this).attr("for")==i})},idOrName:function(e){return this.groups[e.name]||(this.checkable(e)?e.name:e.id||e.name)},checkable:function(e){return/radio|checkbox/i.test(e.type)},findByName:function(t){var i=this.currentForm;return e(document.getElementsByName(t)).map(function(e,n){return n.form==i&&n.name==t&&n||null})},getLength:function(t,i){switch(i.nodeName.toLowerCase()){case"select":return e("option:selected",i).length;case"input":if(this.checkable(i))return this.findByName(i.name).filter(":checked").length}return t.length},depend:function(e,t){return this.dependTypes[typeof e]?this.dependTypes[typeof e](e,t):!0},dependTypes:{"boolean":function(e){return e},string:function(t,i){return!!e(t,i.form).length},"function":function(e,t){return e(t)}},optional:function(t){return!e.validator.methods.required.call(this,e.trim(t.value),t)&&"dependency-mismatch"},startRequest:function(e){this.pending[e.name]||(this.pendingRequest++,this.pending[e.name]=!0)},stopRequest:function(t,i){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[t.name],i&&0==this.pendingRequest&&this.formSubmitted&&this.form()?(e(this.currentForm).submit(),this.formSubmitted=!1):!i&&0==this.pendingRequest&&this.formSubmitted&&(e(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(t){return e.data(t,"previousValue")||e.data(t,"previousValue",{old:null,valid:!0,message:this.defaultMessage(t,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},dateDE:{dateDE:!0},number:{number:!0},numberDE:{numberDE:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(t,i){t.constructor==String?this.classRuleSettings[t]=i:e.extend(this.classRuleSettings,t)},classRules:function(t){var i={};return(t=e(t).attr("class"))&&e.each(t.split(" "),function(){this in e.validator.classRuleSettings&&e.extend(i,e.validator.classRuleSettings[this])}),i},attributeRules:function(t){var i={};t=e(t);for(var n in e.validator.methods){var s=t.attr(n);s&&(i[n]=s)}return i.maxlength&&/-1|2147483647|524288/.test(i.maxlength)&&delete i.maxlength,i},metadataRules:function(t){if(!e.metadata)return{};var i=e.data(t.form,"validator").settings.meta;return i?e(t).metadata()[i]:e(t).metadata()},staticRules:function(t){var i={},n=e.data(t.form,"validator");return n.settings.rules&&(i=e.validator.normalizeRule(n.settings.rules[t.name])||{}),i},normalizeRules:function(t,i){return e.each(t,function(n,s){if(s===!1)delete t[n];else if(s.param||s.depends){var r=!0;switch(typeof s.depends){case"string":r=!!e(s.depends,i.form).length;break;case"function":r=s.depends.call(i,i)}r?t[n]=void 0!==s.param?s.param:!0:delete t[n]}}),e.each(t,function(n,s){t[n]=e.isFunction(s)?s(i):s}),e.each(["minlength","maxlength","min","max"],function(){t[this]&&(t[this]=Number(t[this]))}),e.each(["rangelength","range"],function(){t[this]&&(t[this]=[Number(t[this][0]),Number(t[this][1])])}),e.validator.autoCreateRanges&&(t.min&&t.max&&(t.range=[t.min,t.max],delete t.min,delete t.max),t.minlength&&t.maxlength&&(t.rangelength=[t.minlength,t.maxlength],delete t.minlength,delete t.maxlength)),t.messages&&delete t.messages,t},normalizeRule:function(t){if("string"==typeof t){var i={};e.each(t.split(/\s/),function(){i[this]=!0}),t=i}return t},addMethod:function(t,i,n){e.validator.methods[t]=i,e.validator.messages[t]=void 0!=n?n:e.validator.messages[t],i.length<3&&e.validator.addClassRules(t,e.validator.normalizeRule(t))},methods:{required:function(t,i,n){if(!this.depend(n,i))return"dependency-mismatch";switch(i.nodeName.toLowerCase()){case"select":return(t=e(i).val())&&t.length>0;case"input":if(this.checkable(i))return this.getLength(t,i)>0;default:return e.trim(t).length>0}},remote:function(t,i,n){if(this.optional(i))return"dependency-mismatch";var s=this.previousValue(i);if(this.settings.messages[i.name]||(this.settings.messages[i.name]={}),s.originalMessage=this.settings.messages[i.name].remote,this.settings.messages[i.name].remote=s.message,n="string"==typeof n&&{url:n}||n,this.pending[i.name])return"pending";if(s.old===t)return s.valid;s.old=t;var r=this;this.startRequest(i);var o={};return o[i.name]=t,e.ajax(e.extend(!0,{url:n,mode:"abort",port:"validate"+i.name,dataType:"json",data:o,success:function(n){r.settings.messages[i.name].remote=s.originalMessage;var o=n===!0;if(o){var a=r.formSubmitted;r.prepareElement(i),r.formSubmitted=a,r.successList.push(i),r.showErrors()}else a={},n=n||r.defaultMessage(i,"remote"),a[i.name]=s.message=e.isFunction(n)?n(t):n,r.showErrors(a);s.valid=o,r.stopRequest(i,o)}},n)),"pending"},minlength:function(t,i,n){return this.optional(i)||this.getLength(e.trim(t),i)>=n},maxlength:function(t,i,n){return this.optional(i)||this.getLength(e.trim(t),i)<=n},rangelength:function(t,i,n){return t=this.getLength(e.trim(t),i),this.optional(i)||t>=n[0]&&t<=n[1]},min:function(e,t,i){return this.optional(t)||e>=i},max:function(e,t,i){return this.optional(t)||i>=e},range:function(e,t,i){return this.optional(t)||e>=i[0]&&e<=i[1]},email:function(e,t){return this.optional(t)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(e)},url:function(e,t){return this.optional(t)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)},date:function(e,t){return this.optional(t)||!/Invalid|NaN/.test(new Date(e))},dateISO:function(e,t){return this.optional(t)||/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(e)},number:function(e,t){return this.optional(t)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(e)},digits:function(e,t){return this.optional(t)||/^\d+$/.test(e)},creditcard:function(e,t){if(this.optional(t))return"dependency-mismatch";if(/[^0-9-]+/.test(e))return!1;var i=0,n=0,s=!1;e=e.replace(/\D/g,"");for(var r=e.length-1;r>=0;r--)n=e.charAt(r),n=parseInt(n,10),s&&(n*=2)>9&&(n-=9),i+=n,s=!s;return i%10==0},accept:function(e,t,i){return i="string"==typeof i?i.replace(/,/g,"|"):"png|jpe?g|gif",this.optional(t)||e.match(RegExp(".("+i+")$","i"))},equalTo:function(t,i,n){return n=e(n).unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){e(i).valid()
}),t==n.val()}}}),e.format=e.validator.format}(jQuery),function(e){var t={};if(e.ajaxPrefilter)e.ajaxPrefilter(function(e,i,n){i=e.port,"abort"==e.mode&&(t[i]&&t[i].abort(),t[i]=n)});else{var i=e.ajax;e.ajax=function(n){var s=("port"in n?n:e.ajaxSettings).port;return"abort"==("mode"in n?n:e.ajaxSettings).mode?(t[s]&&t[s].abort(),t[s]=i.apply(this,arguments)):i.apply(this,arguments)}}}(jQuery),function(e){!jQuery.event.special.focusin&&!jQuery.event.special.focusout&&document.addEventListener&&e.each({focus:"focusin",blur:"focusout"},function(t,i){function n(t){return t=e.event.fix(t),t.type=i,e.event.handle.call(this,t)}e.event.special[i]={setup:function(){this.addEventListener(t,n,!0)},teardown:function(){this.removeEventListener(t,n,!0)},handler:function(t){return arguments[0]=e.event.fix(t),arguments[0].type=i,e.event.handle.apply(this,arguments)}}}),e.extend(e.fn,{validateDelegate:function(t,i,n){return this.bind(i,function(i){var s=e(i.target);return s.is(t)?n.apply(s,arguments):void 0})}})}(jQuery),function($){var weDevs_CPM={init:function(){$("#cpm-create-user-wrap").on("submit","form.cpm-user-create-form",this.Project.UserCreate),$("a#cpm-create-project").on("click",this.Project.openDialog),$("#cpm-project-dialog").on("click","a.project-cancel",this.Project.closeDialog),$("a.cpm-project-delete-link").on("click",this.Project.remove),$("#cpm-project-dialog").on("submit","form.cpm-project-form",this.Project.create),$(".cpm-edit-project").on("submit","form.cpm-project-form",this.Project.edit),$(".cpm-project-head").on("click","a.cpm-icon-edit",this.Project.toggleEditForm),$(".cpm-project-head").on("click","a.project-cancel",this.Project.toggleEditForm),$(".cpm-load-more").on("click",this.Project.loadActivity),$(".cpm-links").on("click",".cpm-milestone-delete",this.Milestone.remove),$(".cpm-links").on("click",".cpm-milestone-complete",this.Milestone.markComplete),$(".cpm-links").on("click",".cpm-milestone-open",this.Milestone.markOpen),$(".cpm-links").on("click","a.cpm-icon-edit",this.Milestone.get),$(".cpm-new-milestone-form").on("submit","form.cpm-milestone-form",this.Milestone.add),$(".cpm-new-milestone-form").on("click","a.milestone-cancel",this.Milestone.hide),$("a#cpm-add-milestone").on("click",this.Milestone.show),$(".cpm-milestone").on("click","a.milestone-cancel",this.Milestone.cancelUpdate),$(".cpm-milestone").on("submit","form.cpm-milestone-form",this.Milestone.update),$(".cpm-comment-wrap").on("click",".cpm-edit-comment-link",this.Comment.get),$(".cpm-comment-wrap").on("click",".cpm-comment-edit-cancel",this.Comment.cancelCommentEdit),$(".cpm-comment-wrap").on("click",".cpm-delete-comment-link",this.Comment.deleteComment),$(".cpm-comment-wrap").on("submit",".cpm-comment-form",this.Comment.update),$(".cpm-comment-wrap").on("click",".cpm-delete-file",this.Uploader.deleteFile),$(".cpm-comment-form-wrap").on("click",".cpm-delete-file",this.Uploader.deleteFile),$(".cpm-duplicate-project").on("click",this.Project.ProjectDuplicate),$(".cpm-archive").on("click",this.Project.ProjectArchive),$(".cpm-settings-bind").on("click",this.Project.Settings),$(".cpm-comment-form").validate({submitHandler:function(e){return weDevs_CPM.Comment.addNew.call(e),!1}}),$(".cpm").on("click",".cpm-toggle-checkbox",function(e){e.preventDefault();var t=$(".notify-users").find('input[type=checkbox][name="notify_user[]"]');t.prop("checked",!t.prop("checked"))}),$(".cpm-new-message-form form").validate({submitHandler:function(e){return weDevs_CPM.Message.addNew.call(e),!1}}),$(".cpm-new-message-btn").on("click",this.Message.show),$(".cpm-new-message-form").on("click","a.message-cancel",this.Message.hide),$(".cpm-single").on("click","a.cpm-msg-edit",this.Message.get),$(".cpm-single").on("click","a.message-cancel",this.Message.hideEditForm),$(".cpm-single").on("click",".cpm-delete-file",this.Uploader.deleteFile),$(".cpm-new-message-form").on("click",".cpm-delete-file",this.Uploader.deleteFile),$(".cpm-single").on("submit","form.cpm-message-form",this.Message.update),$("table.cpm-messages-table").on("click","a.delete-message",this.Message.remove)},Project:{UserCreate:function(e){e.preventDefault();var t=$(this),i=t.find("input[type=submit]").siblings("span");if(i.addClass("cpm-spinner"),"disabled"==t.attr("disabled"))return!1;t.attr("disabled",!0);var n={action:"cpm_user_create",data:t.serialize(),_wpnonce:CPM_Vars.nonce};return $.post(CPM_Vars.ajaxurl,n,function(e){t.attr("disabled",!1),i.removeClass("cpm-spinner"),e.success?($("#cpm-create-user-wrap").dialog("close"),$(".cpm-project-role>table").append(e.data),$(".cpm-error").html(""),$("form.cpm-user-create-form input[type=text], input[type=email]").val("")):$(".cpm-error").html(e.data)}),!1},Settings:function(e){e.preventDefault();var t=$(this),i=t.siblings(".cpm-settings");i.is(":visible")===!1?i.show():i.hide()},ProjectArchive:function(e){e.preventDefault();var t=$(this),i={action:"cpm_project_archive",_nonce:CPM_Vars.nonce,project_id:t.data("project_id"),type:t.data("type")};return"disabled"==t.attr("disabled")?!1:(t.attr("disabled",!0),t.siblings("span").addClass("cpm-loading"),void $.post(CPM_Vars.ajaxurl,i,function(e){t.attr("disabled",!1),e.success&&($("article.cpm-project").length?($(".cpm-active").html("Active("+e.data.count.active+")"),$(".cpm-archive-head").html("Completed("+e.data.count.archive+")"),t.closest("article").fadeOut("slow",function(){this.remove()})):location.href=e.data.url)}))},ProjectDuplicate:function(e){e.preventDefault();var t=$(this),i={action:"cpm_project_duplicate",_nonce:CPM_Vars.nonce,url:t.attr("href"),project_id:t.data("project_id")};return"disabled"==t.attr("disabled")?!1:(t.attr("disabled",!0),t.siblings("span").addClass("cpm-loading"),void $.post(CPM_Vars.ajaxurl,i,function(e){t.attr("disabled",!1),e.success&&(location.href=e.data.url)}))},openDialog:function(e){e.preventDefault(),$("#cpm-project-dialog").dialog("open")},closeDialog:function(e){e.preventDefault(),$("#cpm-project-dialog").dialog("close")},create:function(e){e.preventDefault();var t=$(this).find("input[type=submit]");if(t.is(":disabled"))return!1;t.attr("disabled",!0);var i=$.trim($("#project_name").val());if(""===i)return alert("Enter a project name"),!1;var n=$(this),s=n.serialize();n.find(".cpm-loading").show(),$.post(CPM_Vars.ajaxurl,s,function(e){t.attr("disabled",!1),e=$.parseJSON(e),e.success&&(window.location.href=e.url)})},toggleEditForm:function(e){e.preventDefault();var t=$(this).closest(".cpm-project-head");t.find(".cpm-edit-project").slideToggle(),t.find(".cpm-project-detail").slideToggle()},edit:function(e){e.preventDefault();var t=$(this),i=t.find(".cpm-pro-update-spinner");i.show();var n=$(this).closest(".cpm-project-head"),s=t.serialize(),r=t.find("input[type=submit]");r.attr("disabled",!0),t.append('<div class="cpm-loading">Saving...</div>'),$.post(CPM_Vars.ajaxurl,s,function(e){r.attr("disabled",!1),i.hide(),e=$.parseJSON(e),e.success&&(n.find(".cpm-project-title").text(e.title),n.find(".detail").html(e.content),t.find(".cpm-project-role").children("table").html(e.users),t.closest(".cpm-edit-project").slideUp(),n.find(".cpm-project-detail").slideToggle())}),$(".cpm-loading").remove()},remove:function(e){e.preventDefault();var t=$(this),i=t.data("confirm"),n={project_id:t.data("project_id"),action:"cpm_project_delete",url:t.attr("href"),_wpnonce:CPM_Vars.nonce};confirm(i)&&(t.siblings("span").addClass("cpm-loading"),$.post(CPM_Vars.ajaxurl,n,function(e){e=$.parseJSON(e),e.success&&(location.href=e.url)}))},loadActivity:function(e){e.preventDefault();var t=$(this),i=t.data("total"),n=parseInt(t.data("start")),s={project_id:t.data("project_id"),offset:n,action:"cpm_get_activity",_wpnonce:CPM_Vars.nonce};t.append('<div class="cpm-loading">Loading...</div>'),$.get(CPM_Vars.ajaxurl,s,function(e){e=$.parseJSON(e),e.success?(n=e.count+n,t.prev("ul.cpm-activity").append(e.content),t.data("start",n)):t.remove(),$(".cpm-loading").remove()})}},Milestone:{remove:function(e){e.preventDefault();var t=$(this);confirm(t.data("confirm"))&&weDevs_CPM.Milestone.ajaxRequest.call(this,"cpm_delete_milestone")},markComplete:function(e){e.preventDefault(),weDevs_CPM.Milestone.ajaxRequest.call(this,"cpm_milestone_complete")},markOpen:function(e){e.preventDefault(),weDevs_CPM.Milestone.ajaxRequest.call(this,"cpm_milestone_open")},show:function(e){e.preventDefault(),$(".cpm-new-milestone-form").slideDown()},hide:function(e){e.preventDefault(),$(".cpm-new-milestone-form").slideUp()},get:function(e){e.preventDefault();var t=$(this),i=t.closest(".cpm-milestone"),n={id:t.data("id"),project_id:t.data("project_id"),action:"cpm_milestone_get",_wpnonce:CPM_Vars.nonce};t.addClass("cpm-milestones-spinner"),$.post(CPM_Vars.ajaxurl,n,function(e){e=$.parseJSON(e),e.success&&(i.find(".milestone-detail").hide().next(".cpm-milestone-edit-form").html(e.content).fadeIn(),$(".datepicker").datepicker())})},add:function(e){e.preventDefault();var t=$(this),i=t.find(".cpm-loading"),n=t.serialize(),s=t.find("input[name=create_milestone]");i.show(),s.attr("disabled",!0),$.post(CPM_Vars.ajaxurl,n,function(e){i.hide(),s.attr("disabled",!1),e=$.parseJSON(e),e.success&&window.location.reload()})},update:function(e){e.preventDefault();var t=$(this),i=t.find(".cpm-loading"),n=t.find("input[name=create_milestone]"),s=t.serialize();i.show(),n.attr("disabled",!0),$.post(CPM_Vars.ajaxurl,s,function(e){e=$.parseJSON(e),e.success&&window.location.reload()})},cancelUpdate:function(e){e.preventDefault();var t=$(this),i=t.closest(".cpm-milestone"),n=i.find(".cpm-milestones-spinner");n.removeClass("cpm-milestones-spinner"),i.find(".cpm-milestone-edit-form").hide().prev(".milestone-detail").fadeIn()},ajaxRequest:function(e){var t=$(this),i={milestone_id:t.data("id"),project_id:t.data("project"),action:e,_wpnonce:CPM_Vars.nonce};t.addClass("cpm-milestones-spinner"),$.post(CPM_Vars.ajaxurl,i,function(e){location.reload()})}},Uploader:{deleteFile:function(e){if(e.preventDefault(),confirm("This file will be deleted permanently")){var t=$(this),i={file_id:t.data("id"),action:"cpm_delete_file",_wpnonce:CPM_Vars.nonce};$.post(CPM_Vars.ajaxurl,i,function(){}),t.closest(".cpm-uploaded-item").fadeOut(function(){$(this).remove()})}}},Comment:{addNew:function(){var e=$(this),t=e.find("input[name=cpm_new_comment]"),i=e.find(".cpm-loading"),n=e.serialize();t.attr("disabled",!0),i.show(),$.post(CPM_Vars.ajaxurl,n,function(e){t.attr("disabled",!1),i.hide(),e=JSON.parse(e),e.success&&($(".cpm-comment-wrap").append(e.content).fadeIn("slow"),$(".cpm-comment-form textarea, .cpm-comment-form input[type=checkbox]").val(""),$(".cpm-comment-form .cpm-upload-filelist").html("")),$(".cpm-colorbox-img").prettyPhoto()})},get:function(e){e.preventDefault();var t=$(this),i=t.closest(".cpm-comment"),n={comment_id:t.data("comment_id"),project_id:t.data("project_id"),object_id:t.data("object_id"),action:"cpm_comment_get",_wpnonce:CPM_Vars.nonce};$.post(CPM_Vars.ajaxurl,n,function(e){e=$.parseJSON(e),e.success&&0===i.find("form").length&&(i.find(".cpm-comment-content").hide(),i.find(".cpm-comment-edit-form").hide().html(e.form).fadeIn(),new CPM_Uploader("cpm-upload-pickfiles-"+e.id,"cpm-upload-container-"+e.id))})},cancelCommentEdit:function(e){e.preventDefault();var t=$(this);t.parents(".cpm-comment").find(".cpm-comment-content").fadeIn(),t.closest(".cpm-comment-edit-form").html("")},update:function(e){e.preventDefault();var t=$(this),i=t.find("input[name=cpm_new_comment]"),n=t.find(".cpm-loading"),s=t.closest(".cpm-comment-container"),r=t.serialize(),o=$.trim(t.find("textarea").val());return o.length<1?(alert("Please enter some text"),!1):(i.attr("disabled",!0),n.show(),void $.post(CPM_Vars.ajaxurl,r,function(e){i.attr("disabled",!1),n.hide(),e=$.parseJSON(e),e.success&&(s.find(".cpm-comment-content").html(e.content).fadeIn(),t.parent().remove()),$(".cpm-colorbox-img").prettyPhoto()}))},deleteComment:function(e){e.preventDefault();var t=$(this),i=t.data("confirm"),n={comment_id:t.data("id"),project_id:t.data("project_id"),action:"cpm_comment_delete",_wpnonce:CPM_Vars.nonce};return"disabled"==t.attr("disabled")?!1:void(confirm(i)&&(t.addClass("cpm-comment-spinner"),t.attr("disabled","disabled"),$.post(CPM_Vars.ajaxurl,n,function(e){t.removeClass("cpm-comment-spinner"),t.removeAttr("disabled"),e=$.parseJSON(e),e.success&&t.closest("li").fadeOut(function(){$(this).remove()})})))}},Message:{show:function(e){e.preventDefault(),$(".cpm-new-message-form").slideDown()},hide:function(e){e.preventDefault(),$(".cpm-new-message-form").slideUp()},addNew:function(e){var t=$(this),i=t.serialize(),n=t.find("input[name=create_message]"),s=t.find(".cpm-loading");return n.attr("disabled",!0),s.show(),$.post(CPM_Vars.ajaxurl,i,function(e){n.attr("disabled",!1),s.hide(),e=$.parseJSON(e),e.success&&(window.location.href=e.url),$(".cpm-loading").remove()}),!1},update:function(e){e.preventDefault();var t=$(this),i=t.find("input[name=create_message]"),n=t.find(".cpm-loading"),s=t.closest(".cpm-single"),r=t.serialize();i.attr("disabled",!0),n.show(),$.post(CPM_Vars.ajaxurl,r,function(e){i.attr("disabled",!1),n.hide(),e=$.parseJSON(e),e.success&&s.find(".cpm-entry-detail").html(e.content).fadeIn().next(".cpm-msg-edit-form").html(""),$(".cpm-colorbox-img").prettyPhoto(),$(".cpm-loading").remove()})},get:function(e){e.preventDefault();var t=$(this);if("disabled"==t.attr("disabled"))return!1;var i=t.closest(".cpm-single"),n={message_id:t.data("msg_id"),project_id:t.data("project_id"),action:"cpm_message_get",_wpnonce:CPM_Vars.nonce};t.addClass("cpm-single-spinner"),t.attr("disabled",!0),$.post(CPM_Vars.ajaxurl,n,function(e){t.removeClass("cpm-single-spinner"),t.attr("disabled",!1),e=$.parseJSON(e),e.success&&(i.find(".cpm-entry-detail").hide().next(".cpm-msg-edit-form").hide().html(e.content).fadeIn(),new CPM_Uploader("cpm-upload-pickfiles-"+e.id,"cpm-upload-container-"+e.id))})},hideEditForm:function(e){e.preventDefault();var t=$(this).closest(".cpm-single");t.find(".cpm-entry-detail").fadeIn().next(".cpm-msg-edit-form").fadeOut(function(){$(this).html("")})},remove:function(e){e.preventDefault();var t=$(this),i={message_id:t.data("msg_id"),project_id:t.data("project_id"),is_admin:CPM_Vars.is_admin,action:"cpm_message_delete",_wpnonce:CPM_Vars.nonce};confirm(t.data("confirm"))&&(t.css("opacity","1").addClass("cpm-messages-spinner"),$.post(CPM_Vars.ajaxurl,i,function(e){e=$.parseJSON(e),e.success&&(window.location.href=e.url)}))}}};$(function(){weDevs_CPM.init(),$(".cpm-colorbox-img").prettyPhoto(),$(".chosen-select").chosen({width:"300px"}),$(".cpm-timetraker").on("click",function(){$(this).runner("start")}),$(".datepicker").datepicker(),$(".cpm-project-coworker").length&&($(".cpm-project-coworker").autocomplete({minLength:3,source:function(request,response){var data={action:"cpm_user_autocomplete",term:request.term};$.post(CPM_Vars.ajaxurl,data,function(resp){if(resp.success){var nme=eval(resp.data);response(eval(resp.data))}else response("")})},search:function(){$(this).addClass("cpm-spinner")},open:function(){var e=$(this);return e.autocomplete("widget").css("z-index",9999),e.removeClass("cpm-spinner"),!1},select:function(e,t){return"cpm_create_user"==t.item.value?($("form.cpm-user-create-form").find("input[type=text]").val(""),$("#cpm-create-user-wrap").dialog("open")):($(".cpm-project-role>table").append(t.item._user_meta),$("input.cpm-project-coworker").val("")),!1}}).data("ui-autocomplete")._renderItem=function(e,t){return $("<li>").append("<a>"+t.label+"</a>").appendTo(e)},$(".cpm-project-form").on("click",".cpm-project-role .cpm-del-proj-role",function(){$(this).closest("tr").remove()}))})}(jQuery),function(e){var t={init:function(){e(".cpm-task-complete .cpm-complete").attr("checked","checked").attr("disabled",!1),e(".cpm-task-uncomplete .cpm-uncomplete").removeAttr("checked").attr("disabled",!1),e("ul.cpm-todolists").on("click","a.add-task",this.showNewTodoForm),e("ul.cpm-todolists").on("click",".cpm-todos-new a.todo-cancel",this.hideNewTodoForm),e("ul.cpm-todolists").on("submit",".cpm-todo-form form.cpm-task-form",this.submitNewTodo),e("ul.cpm-todolists").on("click",".cpm-todo-action a.cpm-todo-edit",this.toggleEditTodo),e("ul.cpm-todolists").on("click",".cpm-task-edit-form a.todo-cancel",this.toggleEditTodo),e("ul.cpm-todolists").on("submit",".cpm-task-edit-form form",this.updateTodo),e(".cpm-single-task").on("click",".cpm-todo-action a.cpm-todo-edit",this.toggleEditTodo),e(".cpm-single-task").on("click",".cpm-task-edit-form a.todo-cancel",this.toggleEditTodo),e(".cpm-single-task").on("submit",".cpm-task-edit-form form",this.updateTodo),e(".cpm-single-task").on("click","input[type=checkbox].cpm-uncomplete",this.markDone),e(".cpm-single-task").on("click","input[type=checkbox].cpm-complete",this.markUnDone),e(".cpm-single-task").on("click","a.cpm-todo-delete",this.deleteTodo),e("ul.cpm-todolists").on("click",".cpm-uncomplete",this.markDone),e("ul.cpm-todolists").on("click",".cpm-todo-completed input[type=checkbox]",this.markUnDone),e("ul.cpm-todolists").on("click","a.cpm-todo-delete",this.deleteTodo),e(".cpm-new-todolist-form").on("submit","form",this.addList),e("ul.cpm-todolists").on("submit",".cpm-list-edit-form form",this.updateList),e(".cpm-new-todolist-form").on("click","a.list-cancel",this.toggleNewTaskListForm),e("a#cpm-add-tasklist").on("click",this.toggleNewTaskListFormLink),e("ul.cpm-todolists").on("click","a.cpm-list-delete",this.deleteList),e("ul.cpm-todolists").on("click","a.cpm-list-edit",this.toggleEditList),e("ul.cpm-todolists").on("click","a.list-cancel",this.toggleEditList),this.makeSortableTodoList(),this.makeSortableTodo()},makeSortableTodoList:function(){var i=e("ul.cpm-todolists");i&&i.sortable({placeholder:"ui-state-highlight",handle:".move",stop:function(i,n){for(var s=e(n.item).parents("ul.cpm-todolists").find("> li"),r=[],o=0;o<s.length;o++)r.push(e(s[o]).data("id"));t.saveOrder(r)}})},makeSortableTodo:function(){var i=e("ul.cpm-todos");i&&i.sortable({placeholder:"ui-state-highlight",handle:".move",stop:function(i,n){for(var s=e(n.item).parents("ul.cpm-todos").find("input[type=checkbox]"),r=[],o=0;o<s.length;o++)r.push(e(s[o]).val());t.saveOrder(r)}})},saveOrder:function(t){var i={items:t,action:"cpm_task_order"};e.post(CPM_Vars.ajaxurl,i)},showNewTodoForm:function(t){t.preventDefault();var i=e(this),n=i.parent().next();i.closest("li").addClass("cpm-hide"),n.removeClass("cpm-hide")},hideNewTodoForm:function(t){t.preventDefault();var i=e(this),n=i.closest("li");n.addClass("cpm-hide"),n.prev().removeClass("cpm-hide")},markDone:function(){var t=e(this);t.attr("disabled",!0),t.siblings(".cpm-spinner").show();var i=t.closest("li"),n=t.closest("article.cpm-todolist"),s=t.closest(".cpm-single-task"),r={task_id:t.val(),project_id:t.data("project"),list_id:t.data("list"),single:t.data("single"),action:"cpm_task_complete",_wpnonce:CPM_Vars.nonce,is_admin:t.data("is_admin")};e(document).trigger("cpm.markDone.before",[t]),e.post(CPM_Vars.ajaxurl,r,function(r){if(r=JSON.parse(r),e(document).trigger("cpm.markDone.after",[r,t]),r.success===!0)if(i.length){var o=i.parent().siblings(".cpm-todo-completed");o.append("<li>"+r.content+"</li>"),i.remove(),n.find("h3 .cpm-right").html(r.progress)}else s.length&&s.html(r.content)})},markUnDone:function(){var t=e(this);t.attr("disabled",!0),t.siblings(".cpm-spinner").show();var i=t.closest("li"),n=t.closest("article.cpm-todolist"),s=t.closest(".cpm-single-task"),r={task_id:t.val(),project_id:t.data("project"),list_id:t.data("list"),single:t.data("single"),action:"cpm_task_open",_wpnonce:CPM_Vars.nonce,is_admin:t.data("is_admin")};e(document).trigger("cpm.markUnDone.before",[t]),e.post(CPM_Vars.ajaxurl,r,function(r){if(r=JSON.parse(r),r.success===!0){if(i.length){var o=i.parent().siblings(".cpm-todos");o.append("<li>"+r.content+"</li>"),i.remove(),n.find("h3 .cpm-right").html(r.progress)}else s.length&&s.html(r.content);e(".datepicker").datepicker()}e(document).trigger("cpm.markUnDone.after",[r,t])})},deleteTodo:function(t){t.preventDefault();var i=e(this),n=i.closest("li"),s=i.closest("article.cpm-todolist"),r=i.data("confirm"),o=i.data("single"),a={list_id:i.data("list_id"),project_id:i.data("project_id"),task_id:i.data("task_id"),action:"cpm_task_delete",_wpnonce:CPM_Vars.nonce};e(document).trigger("cpm.deleteTodo.before",[i]),confirm(r)&&(i.addClass("cpm-icon-delete-spinner"),i.closest(".cpm-todo-action").css("visibility","visible"),e.post(CPM_Vars.ajaxurl,a,function(t){t=JSON.parse(t),e(document).trigger("cpm.deleteTodo.after",[t,i]),t.success&&(""!==o?location.href=t.list_url:(n.fadeOut(function(){e(this).remove()}),s.find("h3 .cpm-right").html(t.progress)))}))},toggleEditTodo:function(t){t.preventDefault();var i=e(this).closest(".cpm-todo-wrap");i.find(".cpm-todo-content").toggle(),i.find(".cpm-task-edit-form").slideToggle()},updateTodo:function(t){t.preventDefault();var i=e(this),n=i.find("input[name=submit_todo]"),s=i.find(".cpm-new-task-spinner"),r=i.serialize(),o=i.closest("li"),a=i.closest(".cpm-single-task"),l=e.trim(i.find(".todo_content").val());e(document).trigger("cpm.updateTodo.before",[i]),""!==l?(n.attr("disabled",!0),s.show(),e.post(CPM_Vars.ajaxurl,r,function(t){n.attr("disabled",!1),s.hide(),t=JSON.parse(t),t.success===!0?(o.length?o.html(t.content):a.length&&a.html(t.content),e(".datepicker").datepicker()):alert("something went wrong!"),e(document).trigger("cpm.updateTodo.after",[t,i])})):alert("type something")},toggleNewTaskListFormLink:function(t){t.preventDefault(),e(".cpm-new-todolist-form").slideToggle()},toggleNewTaskListForm:function(t){t.preventDefault(),e(this).closest("form").parent().slideToggle()},toggleEditList:function(t){t.preventDefault();var i=e(this).closest("article.cpm-todolist");i.find("header").slideToggle(),i.find(".cpm-list-edit-form").slideToggle()},submitNewTodo:function(t){t.preventDefault();var i=e(this),n=i.find("input[name=submit_todo]"),s=i.find(".cpm-new-task-spinner"),r=i.serialize(),o=i.closest("article.cpm-todolist"),a=e.trim(i.find(".todo_content").val());e(document).trigger("cpm.submitNewTodo.before",[i]),""!==a?(n.attr("disabled",!0),s.show(),e.post(CPM_Vars.ajaxurl,r,function(t){if(n.attr("disabled",!1),s.hide(),t=JSON.parse(t),t.success===!0){var r=i.closest("ul.cpm-todos-new").siblings(".cpm-todos");r.append("<li>"+t.content+"</li>"),i.find("textarea, input[type=text]").val(""),i.find("select").val("-1"),o.find("h3 .cpm-right").html(t.progress),e(".datepicker").datepicker()}else alert("something went wrong!");e(document).trigger("cpm.submitNewTodo.after",[t,i])})):alert("type something")},addList:function(i){i.preventDefault();var n=e(this),s=n.find("input[name=submit_todo]"),r=n.find(".cpm-new-list-spinner"),o=n.serialize(),a=e.trim(n.find("input[name=tasklist_name]").val());e(document).trigger("cpm.addList.before",[n]),""!==a?(s.attr("disabled",!0),r.show(),e.post(CPM_Vars.ajaxurl,o,function(i){if(s.attr("disabled",!1),r.hide(),i=JSON.parse(i),i.success===!0){e("ul.cpm-todolists").append('<li id="cpm-list-'+i.id+'">'+i.content+"</li>");var o=e("#cpm-list-"+i.id);e(".cpm-new-todolist-form").slideToggle(),e("body, html").animate({scrollTop:o.offset().top}),o.find("a.add-task").click(),o.find("textarea.todo_content").focus(),n.find("textarea, input[type=text]").val(""),n.find("select").val("-1"),n.find("input[type=checkbox]").removeAttr("checked"),e(".datepicker").datepicker(),t.makeSortableTodoList(),t.makeSortableTodo(),e(document).trigger("cpm.addList.after",[i,n])}})):alert("type something")},updateList:function(t){t.preventDefault();var i=e(this),n=i.find("input[name=submit_todo]"),s=i.find(".cpm-new-list-spinner");n.attr("disabled",!0),s.show();var r=i.serialize();e(document).trigger("cpm.updateList.before",[i]),e.post(CPM_Vars.ajaxurl,r,function(t){t=JSON.parse(t),n.attr("disabled",!1),s.hide(),t.success===!0&&(i.closest("li").html(t.content),e(".datepicker").datepicker()),e(document).trigger("cpm.updateList.after",[t,i])})},deleteList:function(t){t.preventDefault();var i=e(this),n=i.closest("li"),s=i.data("confirm"),r={list_id:i.data("list_id"),action:"cpm_tasklist_delete",_wpnonce:CPM_Vars.nonce};e(document).trigger("cpm.deleteList.before",[i]),confirm(s)&&(i.addClass("cpm-icon-delete-spinner"),i.closest(".cpm-list-actions").css("visibility","visible"),e.post(CPM_Vars.ajaxurl,r,function(t){t=JSON.parse(t),e(document).trigger("cpm.deleteList.after",[t,i]),t.success&&n.fadeOut(function(){e(this).remove()})}))}};e(function(){t.init()})}(jQuery),function(e){window.CPM_Uploader=function(t,i){this.container=i,this.browse_button=t,e("#"+t).length&&(this.uploader=new plupload.Uploader({runtimes:"html5,silverlight,flash,html4",browse_button:t,container:i,multipart:!0,multipart_params:[],multiple_queues:!1,urlstream_upload:!0,file_data_name:"cpm_attachment",max_file_size:CPM_Vars.plupload.max_file_size,url:CPM_Vars.plupload.url,flash_swf_url:CPM_Vars.plupload.flash_swf_url,silverlight_xap_url:CPM_Vars.plupload.silverlight_xap_url,filters:CPM_Vars.plupload.filters,resize:CPM_Vars.plupload.resize}),this.uploader.bind("Init",e.proxy(this,"init")),this.uploader.bind("FilesAdded",e.proxy(this,"added")),this.uploader.bind("QueueChanged",e.proxy(this,"upload")),this.uploader.bind("UploadProgress",e.proxy(this,"progress")),this.uploader.bind("Error",e.proxy(this,"error")),this.uploader.bind("FileUploaded",e.proxy(this,"uploaded")),this.uploader.init())},CPM_Uploader.prototype={init:function(e,t){},added:function(t,i){var n=e("#"+this.container).find(".cpm-upload-filelist");e.each(i,function(e,t){n.append('<div class="upload-item" id="'+t.id+'"><div class="progress"><div class="percent">0%</div><div class="bar"></div></div><div class="filename original">'+t.name+" ("+plupload.formatSize(t.size)+") <b></b></div></div>")}),t.refresh()},upload:function(e){this.uploader.start()},progress:function(t,i){var n=e("#"+i.id);e(".bar",n).width(200*i.loaded/i.size),e(".percent",n).html(i.percent+"%")},error:function(t,i){e("#"+this.container).find("#"+i.file.id).remove(),alert("Error #"+i.code+": "+i.message)},uploaded:function(t,i,n){var s=e.parseJSON(n.response);if(e("#"+i.id+" b").html("100%"),e("#"+i.id).remove(),s.success){var r=e("#"+this.container).find(".cpm-upload-filelist");r.append(s.content)}else alert(s.error)}},e(function(){new CPM_Uploader("cpm-upload-pickfiles","cpm-upload-container")})}(jQuery),function(e,t){function i(t){e.extend(!0,ft,t)}function n(i,n,c){function d(e){st?g()&&(D(),k(e)):u()}function u(){rt=n.theme?"ui":"fc",i.addClass("fc"),i.addClass(n.isRTL?"fc-rtl":"fc-ltr"),n.theme&&i.addClass("ui-widget"),st=e("<div class='fc-content' style='position:relative'/>").prependTo(i),it=new s(tt,n),nt=it.render(),nt&&i.prepend(nt),v(n.defaultView),n.handleWindowResize&&e(window).resize(M),_()||p()}function p(){setTimeout(function(){!ot.start&&_()&&x()},0)}function f(){ot&&(et("viewDestroy",ot,ot,ot.element),ot.triggerEventDestroy()),e(window).unbind("resize",M),it.destroy(),st.remove(),i.removeClass("fc fc-rtl ui-widget")}function g(){return i.is(":visible")}function _(){return e("body").is(":visible")}function v(e){ot&&e==ot.name||w(e)}function w(t){ft++,ot&&(et("viewDestroy",ot,ot,ot.element),I(),ot.triggerEventDestroy(),G(),ot.element.remove(),it.deactivateButton(ot.name)),it.activateButton(t),ot=new _t[t](e("<div class='fc-view fc-view-"+t+"' style='position:relative'/>").appendTo(st),tt),x(),X(),ft--}function x(e){(!ot.start||e||ot.start>mt||mt>=ot.end)&&g()&&k(e)}function k(e){ft++,ot.start&&(et("viewDestroy",ot,ot,ot.element),I(),E()),G(),ot.render(mt,e||0),F(),X(),(ot.afterRender||N)(),R(),O(),et("viewRender",ot,ot,ot.element),ot.trigger("viewDisplay",ht),ft--,S()}function C(){g()&&(I(),E(),D(),F(),j())}function D(){lt=n.contentHeight?n.contentHeight:n.height?n.height-(nt?nt.height():0)-T(st):Math.round(st.width()/Math.max(n.aspectRatio,.5))}function F(){lt===t&&D(),ft++,ot.setHeight(lt),ot.setWidth(st.width()),ft--,at=i.outerWidth()}function M(){if(!ft)if(ot.start){var e=++pt;setTimeout(function(){e==pt&&!ft&&g()&&at!=(at=i.outerWidth())&&(ft++,C(),ot.trigger("windowResize",ht),ft--)},200)}else p()}function $(){E(),z()}function P(e){E(),j(e)}function j(e){g()&&(ot.setEventData(gt),ot.renderEvents(gt,e),ot.trigger("eventAfterAllRender"))}function E(){ot.triggerEventDestroy(),ot.clearEvents(),ot.clearEventData()}function S(){!n.lazyFetching||dt(ot.visStart,ot.visEnd)?z():j()}function z(){ut(ot.visStart,ot.visEnd)}function H(e){gt=e,j()}function L(e){P(e)}function R(){it.updateTitle(ot.title)}function O(){var e=new Date;e>=ot.start&&ot.end>e?it.disableButton("today"):it.enableButton("today")}function A(e,i,n){ot.select(e,i,n===t?!0:n)}function I(){ot&&ot.unselect()}function q(){x(-1)}function W(){x(1)}function V(){o(mt,-1),x()}function B(){o(mt,1),x()}function U(){mt=new Date,x()}function J(e,t,i){e instanceof Date?mt=h(e):m(mt,e,t,i),x()}function Y(e,i,n){e!==t&&o(mt,e),i!==t&&a(mt,i),n!==t&&l(mt,n),x()}function Q(){return h(mt)}function G(){st.css({width:"100%",height:st.height(),overflow:"hidden"})}function X(){st.css({width:"",height:"",overflow:""})}function Z(){return ot}function K(e,i){return i===t?n[e]:(("height"==e||"contentHeight"==e||"aspectRatio"==e)&&(n[e]=i,C()),t)}function et(e,i){return n[e]?n[e].apply(i||ht,Array.prototype.slice.call(arguments,2)):t}var tt=this;tt.options=n,tt.render=d,tt.destroy=f,tt.refetchEvents=$,tt.reportEvents=H,tt.reportEventChange=L,tt.rerenderEvents=P,tt.changeView=v,tt.select=A,tt.unselect=I,tt.prev=q,tt.next=W,tt.prevYear=V,tt.nextYear=B,tt.today=U,tt.gotoDate=J,tt.incrementDate=Y,tt.formatDate=function(e,t){return b(e,t,n)},tt.formatDates=function(e,t,i){return y(e,t,i,n)},tt.getDate=Q,tt.getView=Z,tt.option=K,tt.trigger=et,r.call(tt,n,c);var it,nt,st,rt,ot,at,lt,ct,dt=tt.isFetchNeeded,ut=tt.fetchEvents,ht=i[0],pt=0,ft=0,mt=new Date,gt=[];m(mt,n.year,n.month,n.date),n.droppable&&e(document).bind("dragstart",function(t,i){var s=t.target,r=e(s);if(!r.parents(".fc").length){var o=n.dropAccept;(e.isFunction(o)?o.call(s,r):r.is(o))&&(ct=s,ot.dragStart(ct,t,i))}}).bind("dragstop",function(e,t){ct&&(ot.dragStop(ct,e,t),ct=null)})}function s(i,n){function s(){p=n.theme?"ui":"fc";var i=n.header;return i?f=e("<table class='fc-header' style='width:100%'/>").append(e("<tr/>").append(o("left")).append(o("center")).append(o("right"))):t}function r(){f.remove()}function o(t){var s=e("<td class='fc-header-"+t+"'/>"),r=n.header[t];return r&&e.each(r.split(" "),function(t){t>0&&s.append("<span class='fc-header-space'/>");var r;e.each(this.split(","),function(t,o){if("title"==o)s.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>"),r&&r.addClass(p+"-corner-right"),r=null;else{var a;if(i[o]?a=i[o]:_t[o]&&(a=function(){d.removeClass(p+"-state-hover"),i.changeView(o)}),a){var l=n.theme?O(n.buttonIcons,o):null,c=O(n.buttonText,o),d=e("<span class='fc-button fc-button-"+o+" "+p+"-state-default'>"+(l?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+l+"'/></span>":c)+"</span>").click(function(){d.hasClass(p+"-state-disabled")||a()}).mousedown(function(){d.not("."+p+"-state-active").not("."+p+"-state-disabled").addClass(p+"-state-down")}).mouseup(function(){d.removeClass(p+"-state-down")}).hover(function(){d.not("."+p+"-state-active").not("."+p+"-state-disabled").addClass(p+"-state-hover")},function(){d.removeClass(p+"-state-hover").removeClass(p+"-state-down")}).appendTo(s);I(d),r||d.addClass(p+"-corner-left"),r=d}}}),r&&r.addClass(p+"-corner-right")}),s}function a(e){f.find("h2").html(e)}function l(e){f.find("span.fc-button-"+e).addClass(p+"-state-active")}function c(e){f.find("span.fc-button-"+e).removeClass(p+"-state-active")}function d(e){f.find("span.fc-button-"+e).addClass(p+"-state-disabled")}function u(e){f.find("span.fc-button-"+e).removeClass(p+"-state-disabled")}var h=this;h.render=s,h.destroy=r,h.updateTitle=a,h.activateButton=l,h.deactivateButton=c,h.disableButton=d,h.enableButton=u;var p,f=e([])}function r(i,n){function s(e,t){return!C||C>e||t>D}function r(e,t){C=e,D=t,z=[];
var i=++T,n=j.length;E=n;for(var s=0;n>s;s++)o(j[s],i)}function o(t,n){a(t,function(s){if(n==T){if(s){i.eventDataTransform&&(s=e.map(s,i.eventDataTransform)),t.eventDataTransform&&(s=e.map(s,t.eventDataTransform));for(var r=0;s.length>r;r++)s[r].source=t,b(s[r]);z=z.concat(s)}E--,E||$(z)}})}function a(n,s){var r,o,l=gt.sourceFetchers;for(r=0;l.length>r;r++){if(o=l[r](n,C,D,s),o===!0)return;if("object"==typeof o)return a(o,s),t}var c=n.events;if(c)e.isFunction(c)?(_(),c(h(C),h(D),function(e){s(e),v()})):e.isArray(c)?s(c):s();else{var d=n.url;if(d){var u,p=n.success,f=n.error,m=n.complete;u=e.isFunction(n.data)?n.data():n.data;var g=e.extend({},u||{}),b=B(n.startParam,i.startParam),y=B(n.endParam,i.endParam);b&&(g[b]=Math.round(+C/1e3)),y&&(g[y]=Math.round(+D/1e3)),_(),e.ajax(e.extend({},vt,n,{data:g,success:function(t){t=t||[];var i=V(p,this,arguments);e.isArray(i)&&(t=i),s(t)},error:function(){V(f,this,arguments),s()},complete:function(){V(m,this,arguments),v()}}))}else s()}}function l(e){e=c(e),e&&(E++,o(e,T))}function c(i){return e.isFunction(i)||e.isArray(i)?i={events:i}:"string"==typeof i&&(i={url:i}),"object"==typeof i?(y(i),j.push(i),i):t}function d(t){j=e.grep(j,function(e){return!w(e,t)}),z=e.grep(z,function(e){return!w(e.source,t)}),$(z)}function u(e){var t,i,n=z.length,s=M().defaultEventEnd,r=e.start-e._start,o=e.end?e.end-(e._end||s(e)):0;for(t=0;n>t;t++)i=z[t],i._id==e._id&&i!=e&&(i.start=new Date(+i.start+r),i.end=e.end?new Date(i.end?+i.end+o:+s(i)+o):null,i.title=e.title,i.url=e.url,i.allDay=e.allDay,i.className=e.className,i.editable=e.editable,i.color=e.color,i.backgroundColor=e.backgroundColor,i.borderColor=e.borderColor,i.textColor=e.textColor,b(i));b(e),$(z)}function p(e,t){b(e),e.source||(t&&(P.events.push(e),e.source=P),z.push(e)),$(z)}function f(t){if(t){if(!e.isFunction(t)){var i=t+"";t=function(e){return e._id==i}}z=e.grep(z,t,!0);for(var n=0;j.length>n;n++)e.isArray(j[n].events)&&(j[n].events=e.grep(j[n].events,t,!0))}else{z=[];for(var n=0;j.length>n;n++)e.isArray(j[n].events)&&(j[n].events=[])}$(z)}function m(t){return e.isFunction(t)?e.grep(z,t):t?(t+="",e.grep(z,function(e){return e._id==t})):z}function _(){S++||F("loading",null,!0)}function v(){--S||F("loading",null,!1)}function b(e){var n=e.source||{},s=B(n.ignoreTimezone,i.ignoreTimezone);e._id=e._id||(e.id===t?"_fc"+bt++:e.id+""),e.date&&(e.start||(e.start=e.date),delete e.date),e._start=h(e.start=g(e.start,s)),e.end=g(e.end,s),e.end&&e.end<=e.start&&(e.end=null),e._end=e.end?h(e.end):null,e.allDay===t&&(e.allDay=B(n.allDayDefault,i.allDayDefault)),e.className?"string"==typeof e.className&&(e.className=e.className.split(/\s+/)):e.className=[]}function y(e){e.className?"string"==typeof e.className&&(e.className=e.className.split(/\s+/)):e.className=[];for(var t=gt.sourceNormalizers,i=0;t.length>i;i++)t[i](e)}function w(e,t){return e&&t&&x(e)==x(t)}function x(e){return("object"==typeof e?e.events||e.url:"")||e}var k=this;k.isFetchNeeded=s,k.fetchEvents=r,k.addEventSource=l,k.removeEventSource=d,k.updateEvent=u,k.renderEvent=p,k.removeEvents=f,k.clientEvents=m,k.normalizeEvent=b;for(var C,D,F=k.trigger,M=k.getView,$=k.reportEvents,P={events:[]},j=[P],T=0,E=0,S=0,z=[],N=0;n.length>N;N++)c(n[N])}function o(e,t,i){return e.setFullYear(e.getFullYear()+t),i||u(e),e}function a(e,t,i){if(+e){var n=e.getMonth()+t,s=h(e);for(s.setDate(1),s.setMonth(n),e.setMonth(n),i||u(e);e.getMonth()!=s.getMonth();)e.setDate(e.getDate()+(s>e?1:-1))}return e}function l(e,t,i){if(+e){var n=e.getDate()+t,s=h(e);s.setHours(9),s.setDate(n),e.setDate(n),i||u(e),c(e,s)}return e}function c(e,t){if(+e)for(;e.getDate()!=t.getDate();)e.setTime(+e+(t>e?1:-1)*xt)}function d(e,t){return e.setMinutes(e.getMinutes()+t),e}function u(e){return e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e}function h(e,t){return t?u(new Date(+e)):new Date(+e)}function p(){var e,t=0;do e=new Date(1970,t++,1);while(e.getHours());return e}function f(e,t){return Math.round((h(e,!0)-h(t,!0))/wt)}function m(e,i,n,s){i!==t&&i!=e.getFullYear()&&(e.setDate(1),e.setMonth(0),e.setFullYear(i)),n!==t&&n!=e.getMonth()&&(e.setDate(1),e.setMonth(n)),s!==t&&e.setDate(s)}function g(e,i){return"object"==typeof e?e:"number"==typeof e?new Date(1e3*e):"string"==typeof e?e.match(/^\d+(\.\d+)?$/)?new Date(1e3*parseFloat(e)):(i===t&&(i=!0),_(e,i)||(e?new Date(e):null)):null}function _(e,t){var i=e.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!i)return null;var n=new Date(i[1],0,1);if(t||!i[13]){var s=new Date(i[1],0,1,9,0);i[3]&&(n.setMonth(i[3]-1),s.setMonth(i[3]-1)),i[5]&&(n.setDate(i[5]),s.setDate(i[5])),c(n,s),i[7]&&n.setHours(i[7]),i[8]&&n.setMinutes(i[8]),i[10]&&n.setSeconds(i[10]),i[12]&&n.setMilliseconds(1e3*Number("0."+i[12])),c(n,s)}else if(n.setUTCFullYear(i[1],i[3]?i[3]-1:0,i[5]||1),n.setUTCHours(i[7]||0,i[8]||0,i[10]||0,i[12]?1e3*Number("0."+i[12]):0),i[14]){var r=60*Number(i[16])+(i[18]?Number(i[18]):0);r*="-"==i[15]?1:-1,n=new Date(+n+6e4*r)}return n}function v(e){if("number"==typeof e)return 60*e;if("object"==typeof e)return 60*e.getHours()+e.getMinutes();var t=e.match(/(\d+)(?::(\d+))?\s*(\w+)?/);if(t){var i=parseInt(t[1],10);return t[3]&&(i%=12,"p"==t[3].toLowerCase().charAt(0)&&(i+=12)),60*i+(t[2]?parseInt(t[2],10):0)}}function b(e,t,i){return y(e,null,t,i)}function y(e,t,i,n){n=n||ft;var s,r,o,a,l=e,c=t,d=i.length,u="";for(s=0;d>s;s++)if(r=i.charAt(s),"'"==r){for(o=s+1;d>o;o++)if("'"==i.charAt(o)){l&&(u+=o==s+1?"'":i.substring(s+1,o),s=o);break}}else if("("==r){for(o=s+1;d>o;o++)if(")"==i.charAt(o)){var h=b(l,i.substring(s+1,o),n);parseInt(h.replace(/\D/,""),10)&&(u+=h),s=o;break}}else if("["==r){for(o=s+1;d>o;o++)if("]"==i.charAt(o)){var p=i.substring(s+1,o),h=b(l,p,n);h!=b(c,p,n)&&(u+=h),s=o;break}}else if("{"==r)l=t,c=e;else if("}"==r)l=e,c=t;else{for(o=d;o>s;o--)if(a=Ct[i.substring(s,o)]){l&&(u+=a(l,n)),s=o-1;break}o==s&&l&&(u+=r)}return u}function w(e){var t,i=new Date(e.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),t=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((t-i)/864e5)/7)+1}function x(e){return e.end?k(e.end,e.allDay):l(h(e.start),1)}function k(e,t){return e=h(e),t||e.getHours()||e.getMinutes()?l(e,1):u(e)}function C(i,n,s){i.unbind("mouseover").mouseover(function(i){for(var r,o,a,l=i.target;l!=this;)r=l,l=l.parentNode;(o=r._fci)!==t&&(r._fci=t,a=n[o],s(a.event,a.element,a),e(i.target).trigger(i)),i.stopPropagation()})}function D(t,i,n){for(var s,r=0;t.length>r;r++)s=e(t[r]),s.width(Math.max(0,i-M(s,n)))}function F(t,i,n){for(var s,r=0;t.length>r;r++)s=e(t[r]),s.height(Math.max(0,i-T(s,n)))}function M(e,t){return $(e)+j(e)+(t?P(e):0)}function $(t){return(parseFloat(e.css(t[0],"paddingLeft",!0))||0)+(parseFloat(e.css(t[0],"paddingRight",!0))||0)}function P(t){return(parseFloat(e.css(t[0],"marginLeft",!0))||0)+(parseFloat(e.css(t[0],"marginRight",!0))||0)}function j(t){return(parseFloat(e.css(t[0],"borderLeftWidth",!0))||0)+(parseFloat(e.css(t[0],"borderRightWidth",!0))||0)}function T(e,t){return E(e)+z(e)+(t?S(e):0)}function E(t){return(parseFloat(e.css(t[0],"paddingTop",!0))||0)+(parseFloat(e.css(t[0],"paddingBottom",!0))||0)}function S(t){return(parseFloat(e.css(t[0],"marginTop",!0))||0)+(parseFloat(e.css(t[0],"marginBottom",!0))||0)}function z(t){return(parseFloat(e.css(t[0],"borderTopWidth",!0))||0)+(parseFloat(e.css(t[0],"borderBottomWidth",!0))||0)}function N(){}function H(e,t){return e-t}function L(e){return Math.max.apply(Math,e)}function R(e){return(10>e?"0":"")+e}function O(e,i){if(e[i]!==t)return e[i];for(var n,s=i.split(/(?=[A-Z])/),r=s.length-1;r>=0;r--)if(n=e[s[r].toLowerCase()],n!==t)return n;return e[""]}function A(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function I(e){e.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function q(e){e.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function W(e,t){var i=e.source||{},n=e.color,s=i.color,r=t("eventColor"),o=e.backgroundColor||n||i.backgroundColor||s||t("eventBackgroundColor")||r,a=e.borderColor||n||i.borderColor||s||t("eventBorderColor")||r,l=e.textColor||i.textColor||t("eventTextColor"),c=[];return o&&c.push("background-color:"+o),a&&c.push("border-color:"+a),l&&c.push("color:"+l),c.join(";")}function V(t,i,n){if(e.isFunction(t)&&(t=[t]),t){var s,r;for(s=0;t.length>s;s++)r=t[s].apply(i,n)||r;return r}}function B(){for(var e=0;arguments.length>e;e++)if(arguments[e]!==t)return arguments[e]}function U(e,t){function i(e,t){t&&(a(e,t),e.setDate(1));var i=s("firstDay"),u=h(e,!0);u.setDate(1);var p=a(h(u),1),m=h(u);l(m,-((m.getDay()-i+7)%7)),o(m);var g=h(p);l(g,(7-g.getDay()+i)%7),o(g,-1,!0);var _=c(),v=Math.round(f(g,m)/7);"fixed"==s("weekMode")&&(l(g,7*(6-v)),v=6),n.title=d(u,s("titleFormat")),n.start=u,n.end=p,n.visStart=m,n.visEnd=g,r(v,_,!0)}var n=this;n.render=i,Q.call(n,e,t,"month");var s=n.opt,r=n.renderBasic,o=n.skipHiddenDays,c=n.getCellsPerWeek,d=t.formatDate}function J(e,t){function i(e,t){t&&l(e,7*t);var i=l(h(e),-((e.getDay()-s("firstDay")+7)%7)),d=l(h(i),7),u=h(i);o(u);var p=h(d);o(p,-1,!0);var f=a();n.start=i,n.end=d,n.visStart=u,n.visEnd=p,n.title=c(u,l(h(p),-1),s("titleFormat")),r(1,f,!1)}var n=this;n.render=i,Q.call(n,e,t,"basicWeek");var s=n.opt,r=n.renderBasic,o=n.skipHiddenDays,a=n.getCellsPerWeek,c=t.formatDates}function Y(e,t){function i(e,t){t&&l(e,t),o(e,0>t?-1:1);var i=h(e,!0),c=l(h(i),1);n.title=a(e,s("titleFormat")),n.start=n.visStart=i,n.end=n.visEnd=c,r(1,1,!1)}var n=this;n.render=i,Q.call(n,e,t,"basicDay");var s=n.opt,r=n.renderBasic,o=n.skipHiddenDays,a=t.formatDate}function Q(t,i,n){function s(e,t,i){tt=e,it=t,nt=i,r(),W||o(),a()}function r(){ft=bt("theme")?"ui":"fc",mt=bt("columnFormat"),gt=bt("weekNumbers"),_t=bt("weekNumberTitle"),vt="iso"!=bt("weekNumberCalculation")?"w":"W"}function o(){Q=e("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(t)}function a(){var i=c();L&&L.remove(),L=e(i).appendTo(t),R=L.find("thead"),O=R.find(".fc-day-header"),W=L.find("tbody"),V=W.find("tr"),B=W.find(".fc-day"),U=V.find("td:first-child"),J=V.eq(0).find(".fc-day > div"),Y=V.eq(0).find(".fc-day-content > div"),q(R.add(R.find("tr"))),q(V),V.eq(0).addClass("fc-first"),V.filter(":last").addClass("fc-last"),B.each(function(t,i){var n=Dt(Math.floor(t/it),t%it);wt("dayRender",H,n,e(i))}),v(B)}function c(){var e="<table class='fc-border-separate' style='width:100%' cellspacing='0'>"+d()+p()+"</table>";return e}function d(){var e,t,i=ft+"-widget-header",n="";for(n+="<thead><tr>",gt&&(n+="<th class='fc-week-number "+i+"'>"+A(_t)+"</th>"),e=0;it>e;e++)t=Dt(0,e),n+="<th class='fc-day-header fc-"+yt[t.getDay()]+" "+i+"'>"+A($t(t,mt))+"</th>";return n+="</tr></thead>"}function p(){var e,t,i,n=ft+"-widget-content",s="";for(s+="<tbody>",e=0;tt>e;e++){for(s+="<tr class='fc-week'>",gt&&(i=Dt(e,0),s+="<td class='fc-week-number "+n+"'><div>"+A($t(i,vt))+"</div></td>"),t=0;it>t;t++)i=Dt(e,t),s+=f(i);s+="</tr>"}return s+="</tbody>"}function f(e){var t=ft+"-widget-content",i=H.start.getMonth(),n=u(new Date),s="",r=["fc-day","fc-"+yt[e.getDay()],t];return e.getMonth()!=i&&r.push("fc-other-month"),+e==+n?r.push("fc-today",ft+"-state-highlight"):r.push(n>e?"fc-past":"fc-future"),s+="<td class='"+r.join(" ")+"' data-date='"+$t(e,"yyyy-MM-dd")+"'><div>",nt&&(s+="<div class='fc-day-number'>"+e.getDate()+"</div>"),s+="<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>"}function m(t){Z=t;var i,n,s,r=Z-R.height();"variable"==bt("weekMode")?i=n=Math.floor(r/(1==tt?2:6)):(i=Math.floor(r/tt),n=r-i*(tt-1)),U.each(function(t,r){tt>t&&(s=e(r),s.find("> div").css("min-height",(t==tt-1?n:i)-T(s)))})}function g(e){X=e,at.clear(),ht.clear(),et=0,gt&&(et=R.find("th.fc-week-number").outerWidth()),K=Math.floor((X-et)/it),D(O.slice(0,-1),K)}function v(e){e.click(b).mousedown(Ct)}function b(t){if(!bt("selectable")){var i=_(e(this).data("date"));wt("dayClick",this,i,!0,t)}}function y(e,t,i){i&&rt.build();for(var n=Mt(e,t),s=0;n.length>s;s++){var r=n[s];v(w(r.row,r.leftCol,r.row,r.rightCol))}}function w(e,i,n,s){var r=rt.rect(e,i,n,s,t);return xt(r,t)}function x(e){return h(e)}function k(e,t){y(e,l(h(t),1),!0)}function C(){kt()}function F(e,t,i){var n=Ft(e),s=B[n.row*it+n.col];wt("dayClick",s,e,t,i)}function M(e,t){ot.start(function(e){kt(),e&&w(e.row,e.col,e.row,e.col)},t)}function $(e,t,i){var n=ot.stop();if(kt(),n){var s=Dt(n);wt("drop",e,s,!0,t,i)}}function P(e){return h(e.start)}function j(e){return at.left(e)}function E(e){return at.right(e)}function S(e){return ht.left(e)}function z(e){return ht.right(e)}function N(e){return V.eq(e)}var H=this;H.renderBasic=s,H.setHeight=m,H.setWidth=g,H.renderDayOverlay=y,H.defaultSelectionEnd=x,H.renderSelection=k,H.clearSelection=C,H.reportDayClick=F,H.dragStart=M,H.dragStop=$,H.defaultEventEnd=P,H.getHoverListener=function(){return ot},H.colLeft=j,H.colRight=E,H.colContentLeft=S,H.colContentRight=z,H.getIsCellAllDay=function(){return!0},H.allDayRow=N,H.getRowCnt=function(){return tt},H.getColCnt=function(){return it},H.getColWidth=function(){return K},H.getDaySegmentContainer=function(){return Q},st.call(H,t,i,n),ct.call(H),lt.call(H),G.call(H);var L,R,O,W,V,B,U,J,Y,Q,X,Z,K,et,tt,it,nt,rt,ot,at,ht,ft,mt,gt,_t,vt,bt=H.opt,wt=H.trigger,xt=H.renderOverlay,kt=H.clearOverlays,Ct=H.daySelectionMousedown,Dt=H.cellToDate,Ft=H.dateToCell,Mt=H.rangeToSegments,$t=i.formatDate;I(t.addClass("fc-grid")),rt=new dt(function(t,i){var n,s,r;O.each(function(t,o){n=e(o),s=n.offset().left,t&&(r[1]=s),r=[s],i[t]=r}),r[1]=s+n.outerWidth(),V.each(function(i,o){tt>i&&(n=e(o),s=n.offset().top,i&&(r[1]=s),r=[s],t[i]=r)}),r[1]=s+n.outerHeight()}),ot=new ut(rt),at=new pt(function(e){return J.eq(e)}),ht=new pt(function(e){return Y.eq(e)})}function G(){function e(e,t){i.renderDayEvents(e,t)}function t(){i.getDaySegmentContainer().empty()}var i=this;i.renderEvents=e,i.clearEvents=t,rt.call(i)}function X(e,t){function i(e,t){t&&l(e,7*t);var i=l(h(e),-((e.getDay()-s("firstDay")+7)%7)),d=l(h(i),7),u=h(i);o(u);var p=h(d);o(p,-1,!0);var f=a();n.title=c(u,l(h(p),-1),s("titleFormat")),n.start=i,n.end=d,n.visStart=u,n.visEnd=p,r(f)}var n=this;n.render=i,K.call(n,e,t,"agendaWeek");var s=n.opt,r=n.renderAgenda,o=n.skipHiddenDays,a=n.getCellsPerWeek,c=t.formatDates}function Z(e,t){function i(e,t){t&&l(e,t),o(e,0>t?-1:1);var i=h(e,!0),c=l(h(i),1);n.title=a(e,s("titleFormat")),n.start=n.visStart=i,n.end=n.visEnd=c,r(1)}var n=this;n.render=i,K.call(n,e,t,"agendaDay");var s=n.opt,r=n.renderAgenda,o=n.skipHiddenDays,a=t.formatDate}function K(i,n,s){function r(e){Nt=e,o(),K?c():a()}function o(){It=Qt("theme")?"ui":"fc",qt=Qt("isRTL"),Wt=v(Qt("minTime")),Vt=v(Qt("maxTime")),Bt=Qt("columnFormat"),Ut=Qt("weekNumbers"),Jt=Qt("weekNumberTitle"),Yt="iso"!=Qt("weekNumberCalculation")?"w":"W",Et=Qt("snapMinutes")||Qt("slotMinutes")}function a(){var t,n,s,r,o,a=It+"-widget-header",l=It+"-widget-content",u=0==Qt("slotMinutes")%15;for(c(),mt=e("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(i),Qt("allDaySlot")?(gt=e("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(mt),t="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+a+" fc-agenda-axis'>"+Qt("allDayText")+"</th><td><div class='fc-day-content'><div style='position:relative'/></div></td><th class='"+a+" fc-agenda-gutter'>&nbsp;</th></tr></table>",_t=e(t).appendTo(mt),vt=_t.find("tr"),x(vt.find("td")),mt.append("<div class='fc-agenda-divider "+a+"'><div class='fc-agenda-divider-inner'/></div>")):gt=e([]),bt=e("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(mt),wt=e("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(bt),xt=e("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(wt),t="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>",n=p(),r=d(h(n),Vt),d(n,Wt),Ht=0,s=0;r>n;s++)o=n.getMinutes(),t+="<tr class='fc-slot"+s+" "+(o?"fc-minor":"")+"'><th class='fc-agenda-axis "+a+"'>"+(u&&o?"&nbsp;":oi(n,Qt("axisFormat")))+"</th><td class='"+l+"'><div style='position:relative'>&nbsp;</div></td></tr>",d(n,Qt("slotMinutes")),Ht++;t+="</tbody></table>",kt=e(t).appendTo(wt),Ct=kt.find("div:first"),k(kt.find("td"))}function c(){var t=f();K&&K.remove(),K=e(t).appendTo(i),tt=K.find("thead"),it=tt.find("th").slice(1,-1),nt=K.find("tbody"),rt=nt.find("td").slice(0,-1),ot=rt.find("> div"),at=rt.find(".fc-day-content > div"),ht=rt.eq(0),ft=ot.eq(0),q(tt.add(tt.find("tr"))),q(nt.add(nt.find("tr")))}function f(){var e="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'>"+m()+g()+"</table>";return e}function m(){var e,t,i,n=It+"-widget-header",s="";for(s+="<thead><tr>",Ut?(t=oi(e,Yt),qt?t+=Jt:t=Jt+t,s+="<th class='fc-agenda-axis fc-week-number "+n+"'>"+A(t)+"</th>"):s+="<th class='fc-agenda-axis "+n+"'>&nbsp;</th>",i=0;Nt>i;i++)e=ni(0,i),s+="<th class='fc-"+yt[e.getDay()]+" fc-col"+i+" "+n+"'>"+A(oi(e,Bt))+"</th>";return s+="<th class='fc-agenda-gutter "+n+"'>&nbsp;</th></tr></thead>"}function g(){var e,t,i,n,s,r=It+"-widget-header",o=It+"-widget-content",a=u(new Date),l="";for(l+="<tbody><tr><th class='fc-agenda-axis "+r+"'>&nbsp;</th>",i="",t=0;Nt>t;t++)e=ni(0,t),s=["fc-col"+t,"fc-"+yt[e.getDay()],o],+e==+a?s.push(It+"-state-highlight","fc-today"):s.push(a>e?"fc-past":"fc-future"),n="<td class='"+s.join(" ")+"'><div><div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>",i+=n;return l+=i,l+="<td class='fc-agenda-gutter "+o+"'>&nbsp;</td></tr></tbody>"}function _(e){e===t&&(e=Mt),Mt=e,ai={};var i=nt.position().top,n=bt.position().top,s=Math.min(e-i,kt.height()+n+1);ft.height(s-T(ht)),mt.css("top",i),bt.height(s-n-1),Tt=Ct.height()+1,St=Qt("slotMinutes")/Et,zt=Tt/St}function b(t){Ft=t,Ot.clear(),At.clear();var i=tt.find("th:first");_t&&(i=i.add(_t.find("th:first"))),i=i.add(kt.find("th:first")),$t=0,D(i.width("").each(function(t,i){$t=Math.max($t,e(i).outerWidth())}),$t);var n=K.find(".fc-agenda-gutter");_t&&(n=n.add(_t.find("th.fc-agenda-gutter")));var s=bt[0].clientWidth;jt=bt.width()-s,jt?(D(n,jt),n.show().prev().removeClass("fc-last")):n.hide().prev().addClass("fc-last"),Pt=Math.floor((s-$t)/Nt),D(it.slice(0,-1),Pt)}function y(){function e(){bt.scrollTop(n)}var t=p(),i=h(t);i.setHours(Qt("firstHour"));var n=R(t,i)+1;e(),setTimeout(e,0)}function w(){y()}function x(e){e.click(C).mousedown(ti)}function k(e){e.click(C).mousedown(Y)}function C(e){if(!Qt("selectable")){var t=Math.min(Nt-1,Math.floor((e.pageX-K.offset().left-$t)/Pt)),i=ni(0,t),n=this.parentNode.className.match(/fc-slot(\d+)/);if(n){var s=parseInt(n[1])*Qt("slotMinutes"),r=Math.floor(s/60);i.setHours(r),i.setMinutes(s%60+Wt),Gt("dayClick",rt[t],i,!1,e)}else Gt("dayClick",rt[t],i,!0,e)}}function M(e,t,i){i&&Lt.build();for(var n=ri(e,t),s=0;n.length>s;s++){var r=n[s];x($(r.row,r.leftCol,r.row,r.rightCol))}}function $(e,t,i,n){var s=Lt.rect(e,t,i,n,mt);return Xt(s,mt)}function P(e,t){for(var i=0;Nt>i;i++){var n=ni(0,i),s=l(h(n),1),r=new Date(Math.max(n,e)),o=new Date(Math.min(s,t));if(o>r){var a=Lt.rect(0,i,0,i,wt),c=R(n,r),d=R(n,o);a.top=c,a.height=d-c,k(Xt(a,wt))}}}function j(e){return Ot.left(e)}function E(e){return At.left(e)}function S(e){return Ot.right(e)}function z(e){return At.right(e)}function N(e){return Qt("allDaySlot")&&!e.row}function L(e){var t=ni(0,e.col),i=e.row;return Qt("allDaySlot")&&i--,i>=0&&d(t,Wt+i*Et),t}function R(e,i){if(e=h(e,!0),d(h(e),Wt)>i)return 0;if(i>=d(h(e),Vt))return kt.height();var n=Qt("slotMinutes"),s=60*i.getHours()+i.getMinutes()-Wt,r=Math.floor(s/n),o=ai[r];return o===t&&(o=ai[r]=kt.find("tr").eq(r).find("td div")[0].offsetTop),Math.max(0,Math.round(o-1+Tt*(s%n/n)))}function O(){return vt}function W(e){var t=h(e.start);return e.allDay?t:d(t,Qt("defaultEventMinutes"))}function V(e,t){return t?h(e):d(h(e),Qt("slotMinutes"))}function B(e,t,i){i?Qt("allDaySlot")&&M(e,l(h(t),1),!0):U(e,t)}function U(t,i){var n=Qt("selectHelper");if(Lt.build(),n){var s=si(t).col;if(s>=0&&Nt>s){var r=Lt.rect(0,s,0,s,wt),o=R(t,t),a=R(t,i);if(a>o){if(r.top=o,r.height=a-o,r.left+=2,r.width-=5,e.isFunction(n)){var l=n(t,i);l&&(r.position="absolute",Dt=e(l).css(r).appendTo(wt))}else r.isStart=!0,r.isEnd=!0,Dt=e(ii({title:"",start:t,end:i,className:["fc-select-helper"],editable:!1},r)),Dt.css("opacity",Qt("dragOpacity"));Dt&&(k(Dt),wt.append(Dt),D(Dt,r.width,!0),F(Dt,r.height,!0))}}}else P(t,i)}function J(){Zt(),Dt&&(Dt.remove(),Dt=null)}function Y(t){if(1==t.which&&Qt("selectable")){ei(t);var i;Rt.start(function(e,t){if(J(),e&&e.col==t.col&&!N(e)){var n=L(t),s=L(e);i=[n,d(h(n),Et),s,d(h(s),Et)].sort(H),U(i[0],i[3])}else i=null},t),e(document).one("mouseup",function(e){Rt.stop(),i&&(+i[0]==+i[1]&&Q(i[0],!1,e),Kt(i[0],i[3],!1,e))})}}function Q(e,t,i){Gt("dayClick",rt[si(e).col],e,t,i)}function G(e,t){Rt.start(function(e){if(Zt(),e)if(N(e))$(e.row,e.col,e.row,e.col);else{var t=L(e),i=d(h(t),Qt("defaultEventMinutes"));P(t,i)}},t)}function X(e,t,i){var n=Rt.stop();Zt(),n&&Gt("drop",e,L(n),N(n),t,i)}var Z=this;Z.renderAgenda=r,Z.setWidth=b,Z.setHeight=_,Z.afterRender=w,Z.defaultEventEnd=W,Z.timePosition=R,Z.getIsCellAllDay=N,Z.allDayRow=O,Z.getCoordinateGrid=function(){return Lt},Z.getHoverListener=function(){return Rt},Z.colLeft=j,Z.colRight=S,Z.colContentLeft=E,Z.colContentRight=z,Z.getDaySegmentContainer=function(){return gt},Z.getSlotSegmentContainer=function(){return xt},Z.getMinMinute=function(){return Wt},Z.getMaxMinute=function(){return Vt},Z.getSlotContainer=function(){return wt},Z.getRowCnt=function(){return 1},Z.getColCnt=function(){return Nt},Z.getColWidth=function(){return Pt},Z.getSnapHeight=function(){return zt},Z.getSnapMinutes=function(){return Et},Z.defaultSelectionEnd=V,Z.renderDayOverlay=M,Z.renderSelection=B,Z.clearSelection=J,Z.reportDayClick=Q,Z.dragStart=G,Z.dragStop=X,st.call(Z,i,n,s),ct.call(Z),lt.call(Z),et.call(Z);var K,tt,it,nt,rt,ot,at,ht,ft,mt,gt,_t,vt,bt,wt,xt,kt,Ct,Dt,Ft,Mt,$t,Pt,jt,Tt,Et,St,zt,Nt,Ht,Lt,Rt,Ot,At,It,qt,Wt,Vt,Bt,Ut,Jt,Yt,Qt=Z.opt,Gt=Z.trigger,Xt=Z.renderOverlay,Zt=Z.clearOverlays,Kt=Z.reportSelection,ei=Z.unselect,ti=Z.daySelectionMousedown,ii=Z.slotSegHtml,ni=Z.cellToDate,si=Z.dateToCell,ri=Z.rangeToSegments,oi=n.formatDate,ai={};I(i.addClass("fc-agenda")),Lt=new dt(function(t,i){function n(e){return Math.max(l,Math.min(c,e))}var s,r,o;it.each(function(t,n){s=e(n),r=s.offset().left,t&&(o[1]=r),o=[r],i[t]=o}),o[1]=r+s.outerWidth(),Qt("allDaySlot")&&(s=vt,r=s.offset().top,t[0]=[r,r+s.outerHeight()]);for(var a=wt.offset().top,l=bt.offset().top,c=l+bt.outerHeight(),d=0;Ht*St>d;d++)t.push([n(a+zt*d),n(a+zt*(d+1))])}),Rt=new ut(Lt),Ot=new pt(function(e){return ot.eq(e)}),At=new pt(function(e){return at.eq(e)})}function et(){function i(e,t){var i,n=e.length,r=[],o=[];for(i=0;n>i;i++)e[i].allDay?r.push(e[i]):o.push(e[i]);v("allDaySlot")&&(nt(r,t),$()),a(s(o),t)}function n(){P().empty(),j().empty()}function s(t){var i,n,s,a,l,c,u,p=q(),f=z(),m=S(),g=e.map(t,o),_=[];for(n=0;p>n;n++)for(i=O(0,n),d(i,f),s=tt(r(t,g,i,d(h(i),m-f))),it(s),a=0;s.length>a;a++)for(l=s[a],c=0;l.length>c;c++)u=l[c],u.col=n,u.level=a,_.push(u);return _}function r(e,t,i,n){var s,r,o,a,l,c,d,u,p=[],f=e.length;for(s=0;f>s;s++)r=e[s],o=r.start,a=t[s],a>i&&n>o&&(i>o?(l=h(i),d=!1):(l=o,d=!0),a>n?(c=h(n),u=!1):(c=a,u=!0),p.push({event:r,start:l,end:c,isStart:d,isEnd:u,msLength:c-l}));return p.sort(I)}function o(e){return e.end?h(e.end):d(h(e.start),v("defaultEventMinutes"))}function a(i,n){var s,r,o,a,l,d,h,p,f,m,g,_,y,w,x,k,D,F,$,P=i.length,E="",S=j();for($=(F=v("isRTL"))?-1:1,s=0;P>s;s++)r=i[s],o=r.event,a=N(r.start,r.start),l=N(r.start,r.end),d=r.col,h=r.level,p=r.forward||0,f=L(d),m=R(d)-f,m=Math.min(m-6,.95*m),g=h?m/(h+p+1):p?2*(m/(p+1)-6):m,_=f+m/(h+p+1)*h*$+(F?m-g:0),r.top=a,r.left=_,r.outerWidth=g,r.outerHeight=l-a,E+=c(o,r);for(S[0].innerHTML=E,y=S.children(),s=0;P>s;s++)r=i[s],o=r.event,w=e(y[s]),x=b("eventRender",o,o,w),x===!1?w.remove():(x&&x!==!0&&(w.remove(),w=e(x).css({position:"absolute",top:r.top,left:r.left}).appendTo(S)),r.element=w,o._id===n?u(o,w,r):w[0]._fci=s,Y(o,w));for(C(S,i,u),s=0;P>s;s++)r=i[s],(w=r.element)&&(r.vsides=T(w,!0),r.hsides=M(w,!0),k=w.find(".fc-event-title"),k.length&&(r.contentTop=k[0].offsetTop));for(s=0;P>s;s++)r=i[s],(w=r.element)&&(w[0].style.width=Math.max(0,r.outerWidth-r.hsides)+"px",D=Math.max(0,r.outerHeight-r.vsides),w[0].style.height=D+"px",o=r.event,r.contentTop!==t&&10>D-r.contentTop&&(w.find("div.fc-event-time").text(ot(o.start,v("timeFormat"))+" - "+o.title),w.find("div.fc-event-title").remove()),b("eventAfterRender",o,o,w))}function c(e,t){var i="<",n=e.url,s=W(e,v),r=["fc-event","fc-event-vert"];return y(e)&&r.push("fc-event-draggable"),t.isStart&&r.push("fc-event-start"),t.isEnd&&r.push("fc-event-end"),r=r.concat(e.className),e.source&&(r=r.concat(e.source.className||[])),i+=n?"a href='"+A(e.url)+"'":"div",i+=" class='"+r.join(" ")+"' style='position:absolute;top:"+t.top+"px;left:"+t.left+"px;"+s+"'><div class='fc-event-inner'><div class='fc-event-time'>"+A(at(e.start,e.end,v("timeFormat")))+"</div><div class='fc-event-title'>"+A(e.title||"")+"</div></div><div class='fc-event-bg'></div>",t.isEnd&&w(e)&&(i+="<div class='ui-resizable-handle ui-resizable-s'>=</div>"),i+="</"+(n?"a":"div")+">"}function u(e,t,i){var n=t.find("div.fc-event-time");y(e)&&m(e,t,n),i.isEnd&&w(e)&&g(e,t,n),D(e,t)}function p(e,t,i){function n(){c||(t.width(s).height("").draggable("option","grid",null),c=!0)}var s,r,o,a=i.isStart,c=!0,d=E(),u=V(),p=B(),m=U(),g=z();t.draggable({opacity:v("dragOpacity","month"),revertDuration:v("dragRevertDuration"),start:function(i,g){b("eventDragStart",t,e,i,g),G(e,t),s=t.width(),d.start(function(i,s){if(et(),i){r=!1;var d=O(0,s.col),g=O(0,i.col);o=f(g,d),i.row?a?c&&(t.width(u-10),F(t,p*Math.round((e.end?(e.end-e.start)/kt:v("defaultEventMinutes"))/m)),t.draggable("option","grid",[u,1]),c=!1):r=!0:(K(l(h(e.start),o),l(x(e),o)),n()),r=r||c&&!o}else n(),r=!0;t.draggable("option","revert",r)},i,"drag")},stop:function(i,s){if(d.stop(),et(),b("eventDragStop",t,e,i,s),r)n(),t.css("filter",""),Q(e,t);else{var a=0;c||(a=Math.round((t.offset().top-J().offset().top)/p)*m+g-(60*e.start.getHours()+e.start.getMinutes())),X(this,e,o,a,c,i,s)}}})}function m(e,t,i){function n(){et(),a&&(u?(i.hide(),t.draggable("option","grid",null),K(l(h(e.start),y),l(x(e),y))):(s(w),i.css("display",""),t.draggable("option","grid",[F,M])))}function s(t){var n,s=d(h(e.start),t);e.end&&(n=d(h(e.end),t)),i.text(at(s,n,v("timeFormat")))}var r,o,a,c,u,p,m,g,y,w,k,C=_.getCoordinateGrid(),D=q(),F=V(),M=B(),$=U();t.draggable({scroll:!1,grid:[F,M],axis:1==D?"y":!1,opacity:v("dragOpacity"),revertDuration:v("dragRevertDuration"),start:function(i,n){b("eventDragStart",t,e,i,n),G(e,t),C.build(),r=t.position(),o=C.cell(i.pageX,i.pageY),a=c=!0,u=p=H(o),m=g=0,y=0,w=k=0},drag:function(e,i){var s=C.cell(e.pageX,e.pageY);if(a=!!s){if(u=H(s),m=Math.round((i.position.left-r.left)/F),m!=g){var l=O(0,o.col),d=o.col+m;d=Math.max(0,d),d=Math.min(D-1,d);var h=O(0,d);y=f(h,l)}u||(w=Math.round((i.position.top-r.top)/M)*$)}(a!=c||u!=p||m!=g||w!=k)&&(n(),c=a,p=u,g=m,k=w),t.draggable("option","revert",!a)},stop:function(i,s){et(),b("eventDragStop",t,e,i,s),a&&(u||y||w)?X(this,e,y,u?0:w,u,i,s):(a=!0,u=!1,m=0,y=0,w=0,n(),t.css("filter",""),t.css(r),Q(e,t))}})}function g(e,t,i){var n,s,r=B(),o=U();t.resizable({handles:{s:".ui-resizable-handle"},grid:r,start:function(i,r){n=s=0,G(e,t),b("eventResizeStart",this,e,i,r)},resize:function(a,l){n=Math.round((Math.max(r,t.height())-l.originalSize.height)/r),n!=s&&(i.text(at(e.start,n||e.end?d(k(e),o*n):null,v("timeFormat"))),s=n)},stop:function(i,s){b("eventResizeStop",this,e,i,s),n?Z(this,e,0,o*n,i,s):Q(e,t)}})}var _=this;_.renderEvents=i,_.clearEvents=n,_.slotSegHtml=c,rt.call(_);var v=_.opt,b=_.trigger,y=_.isEventDraggable,w=_.isEventResizable,k=_.eventEnd,D=_.eventElementHandlers,$=_.setHeight,P=_.getDaySegmentContainer,j=_.getSlotSegmentContainer,E=_.getHoverListener,S=_.getMaxMinute,z=_.getMinMinute,N=_.timePosition,H=_.getIsCellAllDay,L=_.colContentLeft,R=_.colContentRight,O=_.cellToDate,I=_.segmentCompare,q=_.getColCnt,V=_.getColWidth,B=_.getSnapHeight,U=_.getSnapMinutes,J=_.getSlotContainer,Y=_.reportEventElement,Q=_.showEvents,G=_.hideEvents,X=_.eventDrop,Z=_.eventResize,K=_.renderDayOverlay,et=_.clearOverlays,nt=_.renderDayEvents,st=_.calendar,ot=st.formatDate,at=st.formatDates;_.draggableDayEvent=p}function tt(e){var t,i,n,s,r,o=[],a=e.length;for(t=0;a>t;t++){for(i=e[t],n=0;;){if(s=!1,o[n])for(r=0;o[n].length>r;r++)if(nt(o[n][r],i)){s=!0;break}if(!s)break;n++}o[n]?o[n].push(i):o[n]=[i]}return o}function it(e){var t,i,n,s,r,o;for(t=e.length-1;t>0;t--)for(s=e[t],i=0;s.length>i;i++)for(r=s[i],n=0;e[t-1].length>n;n++)o=e[t-1][n],nt(r,o)&&(o.forward=Math.max(o.forward||0,(r.forward||0)+1))}function nt(e,t){return e.end>t.start&&e.start<t.end}function st(i,n,s){function r(t,i){var n=Q[t];return e.isPlainObject(n)?O(n,i||s):n}function o(e,t){return n.trigger.apply(n,[e,t||I].concat(Array.prototype.slice.call(arguments,2),[I]))}function a(e){var t=e.source||{};return B(e.startEditable,t.startEditable,r("eventStartEditable"),e.editable,t.editable,r("editable"))&&!r("disableDragging")}function c(e){var t=e.source||{};return B(e.durationEditable,t.durationEditable,r("eventDurationEditable"),e.editable,t.editable,r("editable"))&&!r("disableResizing")}function u(e){U={};var t,i,n=e.length;for(t=0;n>t;t++)i=e[t],U[i._id]?U[i._id].push(i):U[i._id]=[i]}function p(){U={},J={},Y=[]}function m(e){return e.end?h(e.end):q(e)}function g(e,t){Y.push({event:e,element:t}),J[e._id]?J[e._id].push(t):J[e._id]=[t]}function _(){e.each(Y,function(e,t){I.trigger("eventDestroy",t.event,t.event,t.element)})}function v(e,i){i.click(function(n){return i.hasClass("ui-draggable-dragging")||i.hasClass("ui-resizable-resizing")?t:o("eventClick",this,e,n)}).hover(function(t){o("eventMouseover",this,e,t)},function(t){o("eventMouseout",this,e,t)})}function b(e,t){w(e,t,"show")}function y(e,t){w(e,t,"hide")}function w(e,t,i){var n,s=J[e._id],r=s.length;for(n=0;r>n;n++)t&&s[n][0]==t[0]||s[n][i]()}function x(e,t,i,n,s,r,a){var l=t.allDay,c=t._id;C(U[c],i,n,s),o("eventDrop",e,t,i,n,s,function(){C(U[c],-i,-n,l),V(c)},r,a),V(c)}function k(e,t,i,n,s,r){var a=t._id;D(U[a],i,n),o("eventResize",e,t,i,n,function(){D(U[a],-i,-n),V(a)},s,r),V(a)}function C(e,i,n,s){n=n||0;for(var r,o=e.length,a=0;o>a;a++)r=e[a],s!==t&&(r.allDay=s),d(l(r.start,i,!0),n),r.end&&(r.end=d(l(r.end,i,!0),n)),W(r,Q)}function D(e,t,i){i=i||0;for(var n,s=e.length,r=0;s>r;r++)n=e[r],n.end=d(l(m(n),t,!0),i),W(n,Q)}function F(e){return"object"==typeof e&&(e=e.getDay()),Z[e]}function M(){return G}function $(e,t,i){for(t=t||1;Z[(e.getDay()+(i?t:0)+7)%7];)l(e,t)}function P(){var e=j.apply(null,arguments),t=T(e),i=E(t);return i}function j(e,t){var i=I.getColCnt(),n=tt?-1:1,s=tt?i-1:0;"object"==typeof e&&(t=e.col,e=e.row);var r=e*i+(t*n+s);return r}function T(e){var t=I.visStart.getDay();return e+=K[t],7*Math.floor(e/G)+et[(e%G+G)%G]-t}function E(e){var t=h(I.visStart);return l(t,e),t}function S(e){var t=z(e),i=N(t),n=H(i);return n}function z(e){return f(e,I.visStart)}function N(e){var t=I.visStart.getDay();return e+=t,Math.floor(e/7)*G+K[(e%7+7)%7]-K[t]}function H(e){var t=I.getColCnt(),i=tt?-1:1,n=tt?t-1:0,s=Math.floor(e/t),r=(e%t+t)%t*i+n;return{row:s,col:r}}function L(e,t){for(var i=I.getRowCnt(),n=I.getColCnt(),s=[],r=z(e),o=z(t),a=N(r),l=N(o)-1,c=0;i>c;c++){var d=c*n,u=d+n-1,h=Math.max(a,d),p=Math.min(l,u);if(p>=h){var f=H(h),m=H(p),g=[f.col,m.col].sort(),_=T(h)==r,v=T(p)+1==o;s.push({row:c,leftCol:g[0],rightCol:g[1],isStart:_,isEnd:v})
}}return s}function R(e,t){return A(e,t)||e.event.start-t.event.start||(e.event.title||"").localeCompare(t.event.title)}function A(e,t){return"msLength"in e?t.msLength-e.msLength:t.rightCol-t.leftCol-(e.rightCol-e.leftCol)||t.event.allDay-e.event.allDay}var I=this;I.element=i,I.calendar=n,I.name=s,I.opt=r,I.trigger=o,I.isEventDraggable=a,I.isEventResizable=c,I.setEventData=u,I.clearEventData=p,I.eventEnd=m,I.reportEventElement=g,I.triggerEventDestroy=_,I.eventElementHandlers=v,I.showEvents=b,I.hideEvents=y,I.eventDrop=x,I.eventResize=k;var q=I.defaultEventEnd,W=n.normalizeEvent,V=n.reportEventChange,U={},J={},Y=[],Q=n.options;I.isHiddenDay=F,I.skipHiddenDays=$,I.getCellsPerWeek=M,I.dateToCell=S,I.dateToDayOffset=z,I.dayOffsetToCellOffset=N,I.cellOffsetToCell=H,I.cellToDate=P,I.cellToCellOffset=j,I.cellOffsetToDayOffset=T,I.dayOffsetToDate=E,I.rangeToSegments=L,I.segmentCompare=R;var G,X=r("hiddenDays")||[],Z=[],K=[],et=[],tt=r("isRTL");!function(){r("weekends")===!1&&X.push(0,6);for(var t=0,i=0;7>t;t++)K[t]=i,Z[t]=-1!=e.inArray(t,X),Z[t]||(et[i]=t,i++);if(G=i,!G)throw"invalid hiddenDays"}()}function rt(){function t(e,t){var i=n(e,!1,!0);at(i,function(e,t){E(e.event,t)}),b(i,t),at(i,function(e,t){$("eventAfterRender",e.event,e.event,t)})}function i(e,t,i){var s=n([e],!0,!1),r=[];return at(s,function(e,n){e.row===t&&n.css("top",i),r.push(n[0])}),r}function n(t,i,n){var r,l,c=Q(),h=i?e("<div/>"):c,p=s(t);return o(p),r=a(p),h[0].innerHTML=r,l=h.children(),i&&c.append(l),d(p,l),at(p,function(e,t){e.hsides=M(t,!0)}),at(p,function(e,t){t.width(Math.max(0,e.outerWidth-e.hsides))}),at(p,function(e,t){e.outerHeight=t.outerHeight(!0)}),u(p,n),p}function s(e){for(var t=[],i=0;e.length>i;i++){var n=r(e[i]);t.push.apply(t,n)}return t}function r(e){for(var t=e.start,i=x(e),n=tt(t,i),s=0;n.length>s;s++)n[s].event=e;return n}function o(e){for(var t=F("isRTL"),i=0;e.length>i;i++){var n=e[i],s=(t?n.isEnd:n.isStart)?J:B,r=(t?n.isStart:n.isEnd)?Y:U,o=s(n.leftCol),a=r(n.rightCol);n.left=o,n.outerWidth=a-o}}function a(e){for(var t="",i=0;e.length>i;i++)t+=c(e[i]);return t}function c(e){var t="",i=F("isRTL"),n=e.event,s=n.url,r=["fc-event","fc-event-hori"];P(n)&&r.push("fc-event-draggable"),e.isStart&&r.push("fc-event-start"),e.isEnd&&r.push("fc-event-end"),r=r.concat(n.className),n.source&&(r=r.concat(n.source.className||[]));var o=W(n,F);return t+=s?"<a href='"+A(s)+"'":"<div",t+=" class='"+r.join(" ")+"' style='position:absolute;left:"+e.left+"px;"+o+"'><div class='fc-event-inner'>",!n.allDay&&e.isStart&&(t+="<span class='fc-event-time'>"+A(G(n.start,n.end,F("timeFormat")))+"</span>"),t+="<span class='fc-event-title'>"+A(n.title||"")+"</span></div>",e.isEnd&&j(n)&&(t+="<div class='ui-resizable-handle ui-resizable-"+(i?"w":"e")+"'>&nbsp;&nbsp;&nbsp;</div>"),t+="</"+(s?"a":"div")+">"}function d(t,i){for(var n=0;t.length>n;n++){var s=t[n],r=s.event,o=i.eq(n),a=$("eventRender",r,r,o);a===!1?o.remove():(a&&a!==!0&&(a=e(a).css({position:"absolute",left:s.left}),o.replaceWith(a),o=a),s.element=o)}}function u(e,t){var i=p(e),n=v(),s=[];if(t)for(var r=0;n.length>r;r++)n[r].height(i[r]);for(var r=0;n.length>r;r++)s.push(n[r].position().top);at(e,function(e,t){t.css("top",s[e.row]+e.top)})}function p(e){for(var t=O(),i=q(),n=[],s=m(e),r=0;t>r;r++){for(var o=s[r],a=[],l=0;i>l;l++)a.push(0);for(var c=0;o.length>c;c++){var d=o[c];d.top=L(a.slice(d.leftCol,d.rightCol+1));for(var l=d.leftCol;d.rightCol>=l;l++)a[l]=d.top+d.outerHeight}n.push(L(a))}return n}function m(e){var t,i,n,s=O(),r=[];for(t=0;e.length>t;t++)i=e[t],n=i.row,i.element&&(r[n]?r[n].push(i):r[n]=[i]);for(n=0;s>n;n++)r[n]=g(r[n]||[]);return r}function g(e){for(var t=[],i=_(e),n=0;i.length>n;n++)t.push.apply(t,i[n]);return t}function _(e){e.sort(it);for(var t=[],i=0;e.length>i;i++){for(var n=e[i],s=0;t.length>s&&ot(n,t[s]);s++);t[s]?t[s].push(n):t[s]=[n]}return t}function v(){var e,t=O(),i=[];for(e=0;t>e;e++)i[e]=V(e).find("div.fc-day-content > div");return i}function b(e,t){var i=Q();at(e,function(e,i,n){var s=e.event;s._id===t?y(s,i,e):i[0]._fci=n}),C(i,e,y)}function y(e,t,i){P(e)&&D.draggableDayEvent(e,t,i),i.isEnd&&j(e)&&D.resizableDayEvent(e,t,i),S(e,t)}function w(e,t){var i,n=et();t.draggable({delay:50,opacity:F("dragOpacity"),revertDuration:F("dragRevertDuration"),start:function(s,r){$("eventDragStart",t,e,s,r),N(e,t),n.start(function(n,s,r,o){if(t.draggable("option","revert",!n||!r&&!o),Z(),n){var a=nt(s),c=nt(n);i=f(c,a),X(l(h(e.start),i),l(x(e),i))}else i=0},s,"drag")},stop:function(s,r){n.stop(),Z(),$("eventDragStop",t,e,s,r),i?H(this,e,i,0,e.allDay,s,r):(t.css("filter",""),z(e,t))}})}function k(t,n,s){var r=F("isRTL"),o=r?"w":"e",a=n.find(".ui-resizable-"+o),c=!1;I(n),n.mousedown(function(e){e.preventDefault()}).click(function(e){c&&(e.preventDefault(),e.stopImmediatePropagation())}),a.mousedown(function(r){function a(i){$("eventResizeStop",this,t,i),e("body").css("cursor",""),d.stop(),Z(),u&&R(this,t,u,0,i),setTimeout(function(){c=!1},0)}if(1==r.which){c=!0;var d=et();O(),q();var u,h,p=n.css("top"),f=e.extend({},t),m=ct(lt(t.start));K(),e("body").css("cursor",o+"-resize").one("mouseup",a),$("eventResizeStart",this,t,r),d.start(function(n,r){if(n){var a=st(r),c=st(n);if(c=Math.max(c,m),u=rt(c)-rt(a)){f.end=l(T(t),u,!0);var d=h;h=i(f,s.row,p),h=e(h),h.find("*").css("cursor",o+"-resize"),d&&d.remove(),N(t)}else h&&(z(t),h.remove(),h=null);Z(),X(t.start,l(x(t),u))}},r)}})}var D=this;D.renderDayEvents=t,D.draggableDayEvent=w,D.resizableDayEvent=k;var F=D.opt,$=D.trigger,P=D.isEventDraggable,j=D.isEventResizable,T=D.eventEnd,E=D.reportEventElement,S=D.eventElementHandlers,z=D.showEvents,N=D.hideEvents,H=D.eventDrop,R=D.eventResize,O=D.getRowCnt,q=D.getColCnt;D.getColWidth;var V=D.allDayRow,B=D.colLeft,U=D.colRight,J=D.colContentLeft,Y=D.colContentRight;D.dateToCell;var Q=D.getDaySegmentContainer,G=D.calendar.formatDates,X=D.renderDayOverlay,Z=D.clearOverlays,K=D.clearSelection,et=D.getHoverListener,tt=D.rangeToSegments,it=D.segmentCompare,nt=D.cellToDate,st=D.cellToCellOffset,rt=D.cellOffsetToDayOffset,lt=D.dateToDayOffset,ct=D.dayOffsetToCellOffset}function ot(e,t){for(var i=0;t.length>i;i++){var n=t[i];if(n.leftCol<=e.rightCol&&n.rightCol>=e.leftCol)return!0}return!1}function at(e,t){for(var i=0;e.length>i;i++){var n=e[i],s=n.element;s&&t(n,s,i)}}function lt(){function t(e,t,s){i(),t||(t=l(e,s)),c(e,t,s),n(e,t,s)}function i(e){u&&(u=!1,d(),a("unselect",null,e))}function n(e,t,i,n){u=!0,a("select",null,e,t,i,n)}function s(t){var s=r.cellToDate,a=r.getIsCellAllDay,l=r.getHoverListener(),u=r.reportDayClick;if(1==t.which&&o("selectable")){i(t);var h;l.start(function(e,t){d(),e&&a(e)?(h=[s(t),s(e)].sort(H),c(h[0],h[1],!0)):h=null},t),e(document).one("mouseup",function(e){l.stop(),h&&(+h[0]==+h[1]&&u(h[0],!0,e),n(h[0],h[1],!0,e))})}}var r=this;r.select=t,r.unselect=i,r.reportSelection=n,r.daySelectionMousedown=s;var o=r.opt,a=r.trigger,l=r.defaultSelectionEnd,c=r.renderSelection,d=r.clearSelection,u=!1;o("selectable")&&o("unselectAuto")&&e(document).mousedown(function(t){var n=o("unselectCancel");n&&e(t.target).parents(n).length||i(t)})}function ct(){function t(t,i){var n=r.shift();return n||(n=e("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>")),n[0].parentNode!=i[0]&&n.appendTo(i),s.push(n.css(t).show()),n}function i(){for(var e;e=s.shift();)r.push(e.hide().unbind())}var n=this;n.renderOverlay=t,n.clearOverlays=i;var s=[],r=[]}function dt(e){var t,i,n=this;n.build=function(){t=[],i=[],e(t,i)},n.cell=function(e,n){var s,r=t.length,o=i.length,a=-1,l=-1;for(s=0;r>s;s++)if(n>=t[s][0]&&t[s][1]>n){a=s;break}for(s=0;o>s;s++)if(e>=i[s][0]&&i[s][1]>e){l=s;break}return a>=0&&l>=0?{row:a,col:l}:null},n.rect=function(e,n,s,r,o){var a=o.offset();return{top:t[e][0]-a.top,left:i[n][0]-a.left,width:i[r][1]-i[n][0],height:t[s][1]-t[e][0]}}}function ut(t){function i(e){ht(e);var i=t.cell(e.pageX,e.pageY);(!i!=!o||i&&(i.row!=o.row||i.col!=o.col))&&(i?(r||(r=i),s(i,r,i.row-r.row,i.col-r.col)):s(i,r),o=i)}var n,s,r,o,a=this;a.start=function(a,l,c){s=a,r=o=null,t.build(),i(l),n=c||"mousemove",e(document).bind(n,i)},a.stop=function(){return e(document).unbind(n,i),o}}function ht(e){e.pageX===t&&(e.pageX=e.originalEvent.pageX,e.pageY=e.originalEvent.pageY)}function pt(e){function i(t){return s[t]=s[t]||e(t)}var n=this,s={},r={},o={};n.left=function(e){return r[e]=r[e]===t?i(e).position().left:r[e]},n.right=function(e){return o[e]=o[e]===t?n.left(e)+i(e).width():o[e]},n.clear=function(){s={},r={},o={}}}var ft={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"iso",weekNumberTitle:"W",allDayDefault:!0,ignoreTimezone:!0,lazyFetching:!0,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:!1,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"<span class='fc-text-arrow'>&lsaquo;</span>",next:"<span class='fc-text-arrow'>&rsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&laquo;</span>",nextYear:"<span class='fc-text-arrow'>&raquo;</span>",today:"today",month:"month",week:"week",day:"day"},theme:!1,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*",handleWindowResize:!0},mt={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"<span class='fc-text-arrow'>&rsaquo;</span>",next:"<span class='fc-text-arrow'>&lsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&raquo;</span>",nextYear:"<span class='fc-text-arrow'>&laquo;</span>"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},gt=e.fullCalendar={version:"1.6.3"},_t=gt.views={};e.fn.fullCalendar=function(i){if("string"==typeof i){var s,r=Array.prototype.slice.call(arguments,1);return this.each(function(){var n=e.data(this,"fullCalendar");if(n&&e.isFunction(n[i])){var o=n[i].apply(n,r);s===t&&(s=o),"destroy"==i&&e.removeData(this,"fullCalendar")}}),s!==t?s:this}var o=i.eventSources||[];return delete i.eventSources,i.events&&(o.push(i.events),delete i.events),i=e.extend(!0,{},ft,i.isRTL||i.isRTL===t&&ft.isRTL?mt:{},i),this.each(function(t,s){var r=e(s),a=new n(r,i,o);r.data("fullCalendar",a),a.render()}),this},gt.sourceNormalizers=[],gt.sourceFetchers=[];var vt={dataType:"json",cache:!1},bt=1;gt.addDays=l,gt.cloneDate=h,gt.parseDate=g,gt.parseISO8601=_,gt.parseTime=v,gt.formatDate=b,gt.formatDates=y;var yt=["sun","mon","tue","wed","thu","fri","sat"],wt=864e5,xt=36e5,kt=6e4,Ct={s:function(e){return e.getSeconds()},ss:function(e){return R(e.getSeconds())},m:function(e){return e.getMinutes()},mm:function(e){return R(e.getMinutes())},h:function(e){return e.getHours()%12||12},hh:function(e){return R(e.getHours()%12||12)},H:function(e){return e.getHours()},HH:function(e){return R(e.getHours())},d:function(e){return e.getDate()},dd:function(e){return R(e.getDate())},ddd:function(e,t){return t.dayNamesShort[e.getDay()]},dddd:function(e,t){return t.dayNames[e.getDay()]},M:function(e){return e.getMonth()+1},MM:function(e){return R(e.getMonth()+1)},MMM:function(e,t){return t.monthNamesShort[e.getMonth()]},MMMM:function(e,t){return t.monthNames[e.getMonth()]},yy:function(e){return(e.getFullYear()+"").substring(2)},yyyy:function(e){return e.getFullYear()},t:function(e){return 12>e.getHours()?"a":"p"},tt:function(e){return 12>e.getHours()?"am":"pm"},T:function(e){return 12>e.getHours()?"A":"P"},TT:function(e){return 12>e.getHours()?"AM":"PM"},u:function(e){return b(e,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(e){var t=e.getDate();return t>10&&20>t?"th":["st","nd","rd"][t%10-1]||"th"},w:function(e,t){return t.weekNumberCalculation(e)},W:function(e){return w(e)}};gt.dateFormatters=Ct,gt.applyAll=V,_t.month=U,_t.basicWeek=J,_t.basicDay=Y,i({weekMode:"fixed"}),_t.agendaWeek=X,_t.agendaDay=Z,i({allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:.5},minTime:0,maxTime:24})}(jQuery),function(e){e(document).on("cpm.markDone.after",function(t,i,n){var s=e(".my-tasks"),r=n.closest("ul.cpm-uncomplete-mytask");e(".cpm-uncomplete-mytask").children("li").length<=1&&e(".cpm-no-task").fadeIn(1500),r.children("li").length<=1&&r.closest("li").remove(),s.find(".cpm-mytas-current").text(i.current_task),s.find(".cpm-mytas-outstanding").text(i.outstanding),s.find(".cpm-mytas-complete").text(i.complete)}),e(document).on("cpm.markUnDone.after",function(t,i,n){var s=e(".my-tasks"),r=e(".cpm-my-todolists").children("li");e.map(r,function(t,i){var n=e(t),s=n.find(".cpm-todo-completed").find("li").length;0==s&&n.remove()}),e(".cpm-todo-completed").children("li").length<=0&&e(".cpm-no-task").fadeIn(1500),s.find(".cpm-mytas-current").text(i.current_task),s.find(".cpm-mytas-outstanding").text(i.outstanding),s.find(".cpm-mytas-complete").text(i.complete)})}(jQuery);